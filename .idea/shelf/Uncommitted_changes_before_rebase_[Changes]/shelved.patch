Index: src/main/webapp/view/web/detailProduct.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"vn.edu.hcmuaf.fit.model.ProductModel\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.service.ProductService\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.constant.APIConstants\" %>\r\n<%@page import=\"java.util.Date\" %>\r\n<%@page import=\"java.sql.Timestamp\" %>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<%@include file=\"../../common/taglib.jsp\" %>\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <%@include file=\"../../common/web/head.jsp\" %>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/rate_review.css\">\r\n    <title> Sản phẩm | Phone Care </title>\r\n</head>\r\n\r\n<body>\r\n<%\r\n    List<ProductModel> pro = (List<ProductModel>) request.getAttribute(\"pro\");\r\n    List<RateReviewModel> listRate = (List<RateReviewModel>) request.getAttribute(\"listRate\");\r\n\r\n%>\r\n<%\r\n    ProductModel product = (ProductModel) request.getAttribute(\"product\");\r\n    InventoriesModel inventories = (InventoriesModel) request.getAttribute(\"inventoriesList\");\r\n    DiscountModel discount = (DiscountModel) request.getAttribute(\"discount\");\r\n\r\n\r\n%>\r\n\r\n<%@include file=\"../../common/web/header.jsp\" %>\r\n\r\n<!--  detail product -->\r\n<main class=\"\">\r\n\r\n    <div id=\"product\" class=\"productDetail-page\">\r\n        <!--  menu header seo -->\r\n        <div class=\"breadcrumb-shop\">\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 pd5\">\r\n                        <ol class=\"breadcrumb breadcrumb-arrows\">\r\n                            <li>\r\n                                <a href=\"index.html\">\r\n                                    <span>Trang chủ</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a href=\"product.jsp\">\r\n                                    <span>Iphone</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a href=\"service.html\">\r\n                                    <span>Thay màn hình</span>\r\n                                </a>\r\n                            </li>\r\n                            <li class=\"acitve\" style=\"color:#F28102\">\r\n                                <span>Thay Màn hình Iphone X</span>\r\n                                </span>\r\n                                <meta itemprop=\"position\" content=\"3\">\r\n                            </li>\r\n\r\n                        </ol>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- detail product chính -->\r\n        <div class=\"container\">\r\n            <div class=\"row product-detail-wrapper\">\r\n                <div class=\"col-md-12 col-sm-12 col-xs-12\">\r\n                    <div class=\"row product-detail-main pr_style_01\">\r\n                        <div class=\"col-md-7 col-sm-12 col-xs-12\">\r\n                            <div class=\"product-gallery\">\r\n                                <div class=\"product-gallery__thumbs-container hidden-sm hidden-xs\">\r\n                                    <div class=\"product-gallery__thumbs thumb-fix\">\r\n\r\n                                        <div class=\"product-gallery__thumb \" id=\"imgg1\">\r\n                                            <a class=\"product-gallery__thumb-placeholder\" href=\"javascript:void(0);\"\r\n                                               data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                               data-zoom-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\">\r\n                                                <img src=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     alt=\"\"\r\n                                                     grape=\"\">\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"product-image-detail box__product-gallery scroll hidden-xs\">\r\n                                    <ul id=\"sliderproduct\" class=\"site-box-content slide_product\">\r\n                                        <%\r\n                                            for (int image = 0; image < product.getListImage().size(); image++) {\r\n                                        %>\r\n                                        <li class=\"product-gallery-item gallery-item current \" id=\"imgg1a\">\r\n                                            <img class=\"product-image-feature \"\r\n                                                 src=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(image).getUrl():\"\"%>\"\r\n                                                 alt=\"\"\r\n                                                 grape=\"\">\r\n                                        </li>\r\n                                        <%\r\n                                            }%>\r\n                                    </ul>\r\n                                    <div class=\"product-image__button\">\r\n                                        <div id=\"product-zoom-in\" class=\"product-zoom icon-pr-fix\" aria-label=\"Zoom in\"\r\n                                             title=\"Zoom in\">\r\n                        <span class=\"zoom-in\" aria-hidden=\"true\">\r\n                          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                               x=\"0px\" y=\"0px\" viewBox=\"0 0 36 36\" style=\"enable-background:new 0 0 36 36; width:\r\n                            30px; height: 30px;\" xml:space=\"preserve\">\r\n                            <polyline points=\"6,14 9,11 14,16 16,14 11,9 14,6 6,6\">\r\n                            </polyline>\r\n                            <polyline points=\"22,6 25,9 20,14 22,16 27,11 30,14 30,6\">\r\n                            </polyline>\r\n                            <polyline points=\"30,22 27,25 22,20 20,22 25,27 22,30 30,30\">\r\n                            </polyline>\r\n                            <polyline points=\"14,30 11,27 16,22 14,20 9,25 6,22 6,30\">\r\n                            </polyline>\r\n                          </svg>\r\n                        </span>\r\n                                        </div>\r\n                                        <div class=\"gallery-index icon-pr-fix\"><span class=\"current\">1</span>\r\n                                            / <span class=\"total\">8</span></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"product-gallery-slide\">\r\n                                <div class=\"owl-carousel owl-theme owl-product-gallery-slide\">\r\n                                    <div class=\" item\">\r\n                                        <div class=\"product-gallery__thumb \">\r\n                                            <a class=\" product-gallery__thumb-placeholder\" href=\"javascript:void(0);\"\r\n                                               data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                               data-zoom-image=\"images/sanpham/2.jpg\">\r\n                                                <img src=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     alt=\"\"\r\n                                                     grape=\"\">\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"item\">\r\n                                        <div class=\"product-gallery__thumb \">\r\n                                            <a class=\" product-gallery__thumb-placeholder\" href=\"javascript:void(0);\"\r\n                                               data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                               data-zoom-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\">\r\n                                                <img src=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     data-image=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     alt=\"\"\r\n                                                     grape=\"\">\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-5 col-sm-12 col-xs-12\r\n                product-content-desc\" id=\"detail-product\">\r\n                            <div class=\"product-content-desc-1\">\r\n                                <div class=\"product-title\">\r\n                                    <h1><%=product.getName()%>\r\n                                    </h1>\r\n\r\n                                    <%--                                     <span id=\"pro_sku\">ID: <%=product.getId()%></span>--%>\r\n                                    <span id=\"pro_sku\">SL: <%= inventories.getQuantity()%></span>\r\n                                </div>\r\n\r\n                                <% if (discount != null && discount.getIdProduct() != 0) {\r\n                                    Date serverTime = new Date();\r\n                                    Timestamp timestamp = new Timestamp(serverTime.getTime());\r\n                                    Timestamp dateStart = Timestamp.valueOf(discount.getDateStart());\r\n                                    Timestamp dateEnd = Timestamp.valueOf(discount.getDateEnd());\r\n                                    if (dateEnd.getTime() > timestamp.getTime() && dateStart.getTime() < timestamp.getTime()) {\r\n                                %>\r\n                                <div class=\"product-price\" id=\"price-preview\">\r\n                                    <%--                                    <p>Server time: <%=serverTime.toString()%>--%>\r\n                                    <%--                                    </p>--%>\r\n                                    <%--                                    <p>Server time: <%=timestamp.toString()%>--%>\r\n                                    <%--                                    </p>--%>\r\n                                    <%--                                    <p>date start: <%=dateStart.toString()%>--%>\r\n                                    <%--                                    </p>--%>\r\n                                    <%--                                    <p>date end: <%=dateEnd.toString()%>--%>\r\n                                    <%--                                    </p>--%>\r\n                                    <span class=\"pro-price\"><%=product.getPriceDiscount()%>₫</span>\r\n                                    <span class=\"\"\r\n                                          style=\"text-decoration: line-through;\"><%=product.getPrice()%>₫</span>\r\n\r\n                                    <span class=\"pro-sale\"\r\n                                          style=\"background-color: #ff6600;color: white;border: dashed;border-radius: 8px; \"> -<%=discount.getPercentDiscount()%>%</span>\r\n\r\n                                </div>\r\n                                <%} else { %>\r\n                                <div class=\"product-price\" id=\"price-preview\">\r\n                                    <span class=\"pro-price\"><%=product.getPrice()%>₫</span>\r\n                                </div>\r\n                                <%\r\n                                    }\r\n                                } else {\r\n                                %>\r\n                                <div class=\"product-price\" id=\"price-preview\">\r\n                                    <span class=\"pro-price\"><%=product.getPrice()%>₫</span>\r\n                                </div>\r\n                                <%}%>\r\n                                <div class=\"product-price\" id=\"delivery\">\r\n                                    <span>Giao đến: </span>\r\n                                    <span class=\"address\">Q. 3, P. 01, Hồ Chí Minh</span>\r\n                                    <!-- Button trigger modal -->\r\n                                    <button type=\"button\" class=\"btn btn-primary\"\r\n                                            data-toggle=\"modal\" data-target=\"#modalGetAddress\">\r\n                                        Đổi địa chỉ\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div class=\"product-price service-fee\">\r\n                                    Phí vận chuyển: <span>0</span>đ\r\n                                </div>\r\n\r\n                                <div class=\"product-price lead-time\">\r\n                                    Dự tính thời gian giao: <span></span>\r\n                                </div>\r\n\r\n                                <form id=\"add-item-form\" action=\"\" method=\"post\" class=\"variants clearfix\">\r\n                                    <div class=\"select clearfix\">\r\n                                        <div class=\"selector-wrapper\"><label for=\"product-select-option-0\">Màu\r\n                                            sắc</label><span class=\"custom-dropdown custom-dropdown--white\"><select\r\n                                                class=\"single-option-selector\r\n                            custom-dropdown__select\r\n                            custom-dropdown__select--white\" data-option=\"option1\" id=\"product-select-option-0\">\r\n                            <option value=\"Nâu\">Tím</option>\r\n                            <option value=\"Xanh\">Xanh</option>\r\n                          </select></span></div>\r\n                                        <div class=\"selector-wrapper\"><label for=\"product-select-option-1\">Kích\r\n                                            thước</label><span class=\"custom-dropdown custom-dropdown--white\"><select\r\n                                                class=\"single-option-selector\r\n                            custom-dropdown__select\r\n                            custom-dropdown__select--white\" data-option=\"option2\" id=\"product-select-option-1\">\r\n                            <option value=\"36\">36</option>\r\n                            <option value=\"37\">37</option>\r\n                            <option value=\"38\">38</option>\r\n                            <option value=\"35\">35</option>\r\n                          </select></span></div>\r\n                                        <select id=\"product-select\" name=\"id\" style=\"display:none;\">\r\n\r\n                                            <option value=\"1040377813\">Tím / 36 - 4,800,000₫</option>\r\n                                            <option value=\"1040377814\">Tím / 37 - 4,800,000₫</option>\r\n                                            <option value=\"1040377815\">Tím / 38 - 4,800,000₫</option>\r\n                                            <option value=\"1040409049\">Xanh / 35 - 4,800,000₫</option>\r\n                                            <option value=\"1040409050\">Xanh / 36 - 4,800,000₫</option>\r\n                                            <option value=\"1040409053\">Xanh / 37 - 4,800,000₫</option>\r\n                                            <option value=\"1040409054\">Xanh / 38 - 4,800,000₫</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"select-swatch clearfix\">\r\n\r\n                                        <div id=\"variant-swatch-1\" class=\"swatch clearfix\" data-option=\"option2\"\r\n                                             data-option-index=\"1\">\r\n\r\n                                            <div class=\"select-swap\">\r\n                                                <div data-value=\"Zin\" class=\"n-sd swatch-element Zin\">\r\n                                                    <input class=\"variant-1\" id=\"swatch-1-Zin\" type=\"radio\"\r\n                                                           name=\"option2\" value=\"Zin\"\r\n                                                           data-vhandle=\"Zin\" checked=\"\">\r\n                                                    <label for=\"swatch-1-Zin\" class=\"sd\">\r\n                                                        <span>Zin</span>\r\n                                                    </label>\r\n                                                </div>\r\n                                                <!--                                                <div data-value=\"L\" class=\"n-sd swatch-element L\">-->\r\n                                                <!--                                                    <input class=\"variant-1\" id=\"swatch-1-L\" type=\"radio\" name=\"option2\"-->\r\n                                                <!--                                                           value=\"L\"-->\r\n                                                <!--                                                           data-vhandle=\"L\">-->\r\n\r\n                                                <!--                                                    <label for=\"swatch-1-L\">-->\r\n                                                <!--                                                        <span>L</span>-->\r\n                                                <!--                                                    </label>-->\r\n\r\n                                                <!--                                                </div>-->\r\n                                                <!--                                                <div data-value=\"XL\" class=\"n-sd swatch-element XL\">-->\r\n                                                <!--                                                    <input class=\"variant-1\" id=\"swatch-1-XL\" type=\"radio\"-->\r\n                                                <!--                                                           name=\"option2\" value=\"XL\"-->\r\n                                                <!--                                                           data-vhandle=\"XL\">-->\r\n\r\n                                                <!--                                                    <label for=\"swatch-1-XL\">-->\r\n                                                <!--                                                        <span>XL</span>-->\r\n                                                <!--                                                    </label>-->\r\n\r\n                                                <!--                                                </div>-->\r\n                                                <div data-value=\"LK\" class=\"n-sd swatch-element LK soldout\">\r\n                                                    <input class=\"variant-1\" id=\"swatch-1-XXL\" type=\"radio\"\r\n                                                           name=\"option2\" value=\"LK\"\r\n                                                           data-vhandle=\"LK\" disabled=\"\">\r\n\r\n                                                    <label>\r\n                                                        <span>LK</span>\r\n                                                    </label>\r\n\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"selector-actions\">\r\n                                        <div class=\"quantity-area clearfix\">\r\n                                            <input type=\"button\" value=\"-\" onclick=\"decreasesQuantity()\"\r\n                                                   class=\"qty-btn\">\r\n                                            <input type=\"text\" id=\"quantity\" name=\"quantity\" value=\"1\" min=\"1\"\r\n                                                   class=\"quantity-selector\">\r\n                                            <input type=\"button\" value=\"+\" onclick=\"increaseQuantity()\" class=\"qty-btn\">\r\n                                        </div>\r\n                                        <div class=\"wrap-addcart clearfix\">\r\n                                            <div class=\"row-flex\">\r\n                                                <div class=\"snipcart-item block\">\r\n                                                    <div class=\"snipcart-details agileinfo_single_right_details\">\r\n                                                        <button type=\"button\" value=\"Thêm vào giỏ\"\r\n                                                                class=\"button buy-now addtocart-modal\"\r\n                                                                onclick=\"addToCartAJAX(<%=product.getId()%>)\">Thêm vào\r\n                                                            giỏ\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <!--                                            <a href=\"\" target=\"_blank\" class=\"button btn-check\"-->\r\n                                            <!--                                               style=\"color: #ffffff;text-decoration:none;\"><span>Click nhận mã giảm giá ngay!</span></a>-->\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                    <!--                                                      <div class=\"product-action-bottom visible-xs\">-->\r\n                                    <!--                                                          <div class=\"input-bottom\">-->\r\n                                    <!--                                                            <input id=\"quan-input\" type=\"number\" value=\"1\" min=\"1\">-->\r\n                                    <!--                                                          </div>-->\r\n                                    <!--                                                          <button type=\"button\" id=\"add-to-cartbottom\"-->\r\n                                    <!--                                                            class=\"add-to-cartProduct add-cart-bottom button addtocart-modal\" name=\"add\">Thêm vào-->\r\n                                    <!--                                                            giỏ</button>-->\r\n                                    <!--                                                        </div>-->\r\n                                </form>\r\n                                <div class=\"product-description\">\r\n                                    <div class=\"title-bl\">\r\n                                        <h2>Mô tả</h2>\r\n                                    </div>\r\n                                    <div class=\"description-content\">\r\n                                        <div class=\"description-productdetail\">\r\n                                            <%=product.getDescribe()%>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <%--                    RATE & REVIEW           --%>\r\n                    <div class=\"rate-and-review\">\r\n                        <form action=\"detail-product?id-product=<%=product.getId()%>\" class=\"wrapper\" method=\"post\">\r\n                            <div class=\"master\">\r\n                                <h2>Bạn cảm thấy sản phẩm này như thế nào?</h2>\r\n                                <div class=\"rating-component\">\r\n                                    <div class=\"status-msg\">\r\n                                        <label>\r\n                                            <input class=\"rating_msg\" type=\"hidden\" name=\"rating_msg\" value=\"\"/>\r\n                                        </label>\r\n                                    </div>\r\n                                    <div class=\"stars-box\">\r\n                                        <i class=\"star fa fa-star\" title=\"1 star\" data-message=\"Rất tệ\"\r\n                                           data-value=\"1\"></i>\r\n                                        <i class=\"star fa fa-star\" title=\"2 stars\" data-message=\"Tệ\"\r\n                                           data-value=\"2\"></i>\r\n                                        <i class=\"star fa fa-star\" title=\"3 stars\" data-message=\"Trung bình\"\r\n                                           data-value=\"3\"></i>\r\n                                        <i class=\"star fa fa-star\" title=\"4 stars\" data-message=\"Tốt\"\r\n                                           data-value=\"4\"></i>\r\n                                        <i class=\"star fa fa-star\" title=\"5 stars\" data-message=\"Rất tốt\"\r\n                                           data-value=\"5\"></i>\r\n                                    </div>\r\n                                    <div class=\"starrate\">\r\n                                        <label>\r\n                                            <input class=\"ratevalue\" type=\"hidden\" name=\"rate_value\" value=\"\"/>\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"feedback-tags\">\r\n                                    <div class=\"tags-container\" data-tag-set=\"1\">\r\n                                        <div class=\"question-tag\">\r\n                                            Tại sao bạn lại có trải nghiệm tệ?\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"tags-container\" data-tag-set=\"2\">\r\n                                        <div class=\"question-tag\">\r\n                                            Tại sao bạn lại có trải nghiệm tệ?\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div class=\"tags-container\" data-tag-set=\"3\">\r\n                                        <div class=\"question-tag\">\r\n                                            Tại sao bạn lại có trải nghiệm ở mức trung bình?\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"tags-container\" data-tag-set=\"4\">\r\n                                        <div class=\"question-tag\">\r\n                                            Tại sao bạn lại đánh giá sản phẩm tốt?\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"tags-container\" data-tag-set=\"5\">\r\n                                        <div class=\"make-compliment\">\r\n                                            <div class=\"compliment-container\">\r\n                                                Để lại bình luận chi tiết\r\n                                                <i class=\"far fa-smile-wink\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"tags-box\">\r\n                                        <input type=\"text\" class=\"tag form-control\" name=\"comment\"\r\n                                               id=\"inlineFormInputName\" placeholder=\"Nhập bình luận của bạn...\">\r\n                                        <input type=\"hidden\" name=\"product_id\" value=\"<%=product.getId()%>\"/>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                                <div class=\"button-box\">\r\n                                    <input type=\"submit\" class=\"done btn btn-warning\" disabled=\"disabled\"\r\n                                           value=\"Bình luận\"/>\r\n                                </div>\r\n\r\n                                <div class=\"submited-box\">\r\n                                    <div class=\"loader\"></div>\r\n                                    <div class=\"success-message\">\r\n                                        Cảm ơn bạn!\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n\r\n\r\n                        <%\r\n                            for (RateReviewModel rate : listRate) {%>\r\n                        <div class=\"product-list-comment\">\r\n                            <div class=\"info-user\">\r\n                                <img width=\"50px\" height=\"50px\" src=\"images/user/<%=rate.getUser().getAvatar()%>\">\r\n                                <p><%=rate.getUser().getName()%>\r\n                                </p>\r\n                                <div class=\"rated\"><%=rate.getRate()%>\r\n                                </div>\r\n                                <div class=\"content-comment\"><%=rate.getCommentModel().getContent()%>\r\n                                </div>\r\n                                <div class=\"create-at\"><%=rate.getCommentModel().getCreateAt()%>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <%}%>\r\n                    </div>\r\n\r\n                    <div class=\"list-productRelated clearfix\">\r\n                        <div class=\"heading-title text-center\">\r\n                            <h2>Sản phẩm khác</h2>\r\n                        </div>\r\n                        <div class=\"container\">\r\n                            <%--                            Sản phâm--%>\r\n                            <div class=\"row\">\r\n                                <%\r\n                                    for (ProductModel p : pro\r\n                                    ) {%>\r\n                                <div class=\"col-md-3 col-sm-6 col-xs-6 col-6\">\r\n                                    <div class=\"block-banner-category\">\r\n                                        <div class=\"product-img fade-box\">\r\n                                            <a href=\"detail-product?id-product=<%=p.getId()%>\">\r\n                                                <img src=\"images/product/<%=!p.getListImage().isEmpty()?p.getListImage().get(0).getUrl():\"\"%>\"\r\n                                                     alt=\"\"\r\n                                                     class=\"lazyloaded\">\r\n                                            </a>\r\n\r\n                                        </div>\r\n                                        <div class=\"product-detail clearfix\">\r\n                                            <div class=\"pro-text\">\r\n                                                <a style=\" color: black;\r\n                                                  font-size: 14px;text-decoration: none;\"\r\n                                                   href=\"detail-product?id-product=<%=p.getId()%>?id-product=<%=p.getId()%>\"\r\n                                                   title=\"\" inspiration pack>\r\n                                                </a>\r\n                                            </div>\r\n                                            <div class=\"pro-price\">\r\n                                                <p class=\"\"><%=p.getPrice()%>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <%}%>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <!-- show zoom detail product -->\r\n    <!-- zoom -->\r\n    <div class=\"product-zoom11\">\r\n        <div class=\"product-zom\">\r\n            <div class=\"divclose\">\r\n                <i class=\"fa fa-times-circle\"></i>\r\n            </div>\r\n            <div class=\"owl-carousel owl-theme owl-product1\">\r\n                <%\r\n                    for (int image = 0; image < product.getListImage().size(); image++) {\r\n                %>\r\n                <div class=\"item\"><img\r\n                        src=\"images/product/<%=!product.getListImage().isEmpty()?product.getListImage().get(image).getUrl():\"\"%>\"\r\n                        alt=\"\">\r\n                </div>\r\n                <%\r\n                    }%>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Modal address API -->\r\n    <div class=\"modal fade\" id=\"modalGetAddress\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modalGetAddressTitle\"\r\n         aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"modalGetAddressTitle\">Địa chỉ giao hàng</h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <p class=\"col-4\">Tỉnh/Thành phố</p>\r\n                        <select class=\"col-6 select-province form-select\" aria-label=\"Default select example\">\r\n                            <option selected>Vui lòng chọn Tỉnh/Thành phố</option>\r\n                        </select>\r\n                        <input type=\"hidden\" name=\"id-province\" class=\"id-province\">\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <p class=\"col-4\">Quận/Huyện</p>\r\n                        <select class=\"col-6 select-district form-select\" aria-label=\"Default select example\" disabled>\r\n                            <option selected>Vui lòng chọn Quận/Huyện</option>\r\n                        </select>\r\n                        <input type=\"hidden\" name=\"id-district\" class=\"id-district\">\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <p class=\"col-4\">Phường/Xã</p>\r\n                        <select class=\"col-6 select-ward form-select\" aria-label=\"Default select example\" disabled>\r\n                            <option selected>Vui lòng chọn Phường/Xã</option>\r\n                            <input type=\"hidden\" name=\"id-ward\" class=\"id-ward\">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Hủy</button>\r\n                    <button type=\"button\" class=\"btn btn-primary getAPIAddress\">Giao đến địa chỉ này</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</main>\r\n\r\n<%@include file=\"../../common/web/footer.jsp\" %>\r\n\r\n<script src=\"js/divzoom.js\"></script>\r\n<script src=\"js/rate&review.js\"></script>\r\n<script>\r\n    let logisticIDToken = null;\r\n\r\n    async function autoLoginLogisticAPI() {\r\n\r\n        await fetch(`<%=request.getContextPath()%>/api/logistic?action=login`, {\r\n            method: 'POST'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                logisticIDToken = data\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            });\r\n    }\r\n\r\n    $(document).ready(function () {\r\n        let tagSelectModalGetProvince = document.querySelector('.select-province')\r\n        let tagSelectModalGetDistrict = document.querySelector('.select-district')\r\n        let tagSelectModalGetWard = document.querySelector('.select-ward')\r\n\r\n        let height = 100\r\n        let length = 100\r\n        let width = 100\r\n        let weight = 100\r\n\r\n        let valueProvince = 0\r\n        let valueDistrict = 0\r\n        let valueWard = 0\r\n\r\n        $('.getAPIAddress').click(async () => {\r\n            let serviceFee = $('.service-fee span')\r\n            let leadTime = $('.lead-time span')\r\n\r\n            if (valueProvince > 0 && valueDistrict > 0 && valueWard > 0) {\r\n                $('.address').val(`${tagSelectModalGetWard.options[tagSelectModalGetWard.selectedIndex].textContent},\r\n                                    ${tagSelectModalGetDistrict.options[tagSelectModalGetDistrict.selectedIndex].textContent},\r\n                                    ${tagSelectModalGetProvince.options[tagSelectModalGetProvince.selectedIndex].textContent}`)\r\n\r\n                await autoLoginLogisticAPI()\r\n\r\n                //display service fee\r\n                const data = {\r\n                    'logisticIDToken': logisticIDToken,\r\n                    'from_district_id': <%=APIConstants.ID_DISTRICT_STORE%>,\r\n                    'from_ward_id': <%=APIConstants.ID_WARD_STORE%>,\r\n                    'to_district_id': valueDistrict,\r\n                    'to_ward_id': valueWard,\r\n                    'height': height,\r\n                    'length': length,\r\n                    'width': width,\r\n                    'weight': weight,\r\n                };\r\n\r\n                await $.ajax({\r\n                    type: 'POST',\r\n                    data: data,\r\n                    url: `<%=request.getContextPath()%>/api/logistic?action=calculateFee`,\r\n                    success: function (data) {\r\n                        if (data.status === 200) {\r\n                            serviceFee.text(data.data[0].service_fee)\r\n                        }\r\n                    }\r\n                });\r\n\r\n                await $.ajax({\r\n                    type: 'POST',\r\n                    data: data,\r\n                    url: `<%=request.getContextPath()%>/api/logistic?action=leadTime`,\r\n                    success: function (data) {\r\n                        console.log(data)\r\n                        if (data.status === 200) {\r\n                            leadTime.text(data.data[0].formattedDate)\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        })\r\n\r\n        $(\".select-province\").focus(async function () {\r\n            if (logisticIDToken == null) {\r\n                await autoLoginLogisticAPI()\r\n\r\n                await fetch(`<%=request.getContextPath()%>/api/logistic?action=province&logisticIDToken=${logisticIDToken}`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    }\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        for (let i = 0; i < data.original.data.length; i++) {\r\n                            let option = document.createElement(\"option\");\r\n                            option.value = `${data.original.data[i].ProvinceID}`;\r\n                            option.text = `${data.original.data[i].ProvinceName}`;\r\n                            tagSelectModalGetProvince.appendChild(option);\r\n                        }\r\n                        valueProvince = tagSelectModalGetProvince.value * 1\r\n                        console.log(\"valueProvince: \" + valueProvince)\r\n                        $('.id-province').val(valueProvince)\r\n                        handleEventSelectProvinceChange()\r\n                        handleEventSelectDistrictChange()\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                    });\r\n            }\r\n        })\r\n\r\n        function handleEventSelectProvinceChange() {\r\n            $(\".select-province\").change(async function () {\r\n                valueProvince = tagSelectModalGetProvince.value * 1\r\n                $('.id-province').val(valueProvince)\r\n\r\n                tagSelectModalGetDistrict.innerHTML = ''\r\n                // await autoLoginLogisticAPI()\r\n\r\n                if (valueProvince > 0) {\r\n                    tagSelectModalGetDistrict.disabled = false;\r\n\r\n                    const options = {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'Authorization': 'Bearer ' + logisticIDToken\r\n                        }\r\n                    };\r\n\r\n                    await fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/district?provinceID=${valueProvince}`, options)\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            for (let i = 0; i < data.original.data.length; i++) {\r\n                                let option = document.createElement(\"option\");\r\n                                option.value = `${data.original.data[i].DistrictID}`;\r\n                                option.text = `${data.original.data[i].DistrictName}`;\r\n                                tagSelectModalGetDistrict.appendChild(option);\r\n                            }\r\n                            valueDistrict = tagSelectModalGetDistrict.value * 1\r\n                            $('.id-district').val(valueDistrict)\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error)\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\r\n        function handleEventSelectDistrictChange() {\r\n            $(\".select-district\").change(async function () {\r\n                valueDistrict = tagSelectModalGetDistrict.value * 1\r\n                tagSelectModalGetWard.innerHTML = ''\r\n                if (valueDistrict > 0) {\r\n                    tagSelectModalGetWard.disabled = false;\r\n                    const options = {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Authorization': 'Bearer ' + logisticIDToken\r\n                        }\r\n                    };\r\n\r\n                    await fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/ward?districtID=${valueDistrict}`, options)\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            for (let i = 0; i < data.original.data.length; i++) {\r\n                                let option = document.createElement(\"option\");\r\n                                option.value = `${data.original.data[i].WardCode}`;\r\n                                option.text = `${data.original.data[i].WardName}`;\r\n                                tagSelectModalGetWard.appendChild(option);\r\n                            }\r\n                            valueWard = tagSelectModalGetWard.value * 1\r\n                            $('.id-ward').val(valueWard)\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error)\r\n                        });\r\n                }\r\n            });\r\n        }\r\n\r\n        handleEventSelectProvinceChange()\r\n        handleEventSelectDistrictChange()\r\n    });\r\n\r\n    function addToCartAJAX(idProduct) {\r\n        let quantityEle = document.getElementById(\"quantity\")\r\n        let numCart = document.querySelector(\".sum-num-cart\")\r\n        let quantity = quantityEle.value\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: {\r\n                \"id_item\": idProduct * 1,\r\n                \"quantity\": quantity * 1,\r\n            },\r\n            url: \"<%=request.getContextPath()%>/cart?action=add-to-cart\",\r\n            success: function (data) {\r\n                swal(\"Đã thêm sản phẩm vào giỏ hàng!\", {\r\n                    buttons: false,\r\n                    timer: 1000,\r\n                    icon: \"success\",\r\n                });\r\n                numCart.innerText = data.numCart\r\n            }\r\n        });\r\n    }\r\n\r\n    function decreasesQuantity() {\r\n        let quantity = document.querySelector('#quantity.quantity-selector').value;\r\n        quantity *= 1;\r\n        if (quantity > 1) {\r\n            quantity--;\r\n        }\r\n        document.querySelector('#quantity.quantity-selector').value = quantity;\r\n    }\r\n\r\n    function increaseQuantity() {\r\n        var quantity = document.querySelector('#quantity.quantity-selector').value;\r\n\r\n        quantity *= 1;\r\n        quantity++;\r\n        document.querySelector('#quantity.quantity-selector').value = quantity;\r\n    }\r\n\r\n</script>\r\n\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/web/detailProduct.jsp b/src/main/webapp/view/web/detailProduct.jsp
--- a/src/main/webapp/view/web/detailProduct.jsp	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/webapp/view/web/detailProduct.jsp	(date 1687393978917)
@@ -348,109 +348,22 @@
                         </div>
                     </div>
 
-                    <%--                    RATE & REVIEW           --%>
-                    <div class="rate-and-review">
-                        <form action="detail-product?id-product=<%=product.getId()%>" class="wrapper" method="post">
-                            <div class="master">
-                                <h2>Bạn cảm thấy sản phẩm này như thế nào?</h2>
-                                <div class="rating-component">
-                                    <div class="status-msg">
-                                        <label>
-                                            <input class="rating_msg" type="hidden" name="rating_msg" value=""/>
-                                        </label>
-                                    </div>
-                                    <div class="stars-box">
-                                        <i class="star fa fa-star" title="1 star" data-message="Rất tệ"
-                                           data-value="1"></i>
-                                        <i class="star fa fa-star" title="2 stars" data-message="Tệ"
-                                           data-value="2"></i>
-                                        <i class="star fa fa-star" title="3 stars" data-message="Trung bình"
-                                           data-value="3"></i>
-                                        <i class="star fa fa-star" title="4 stars" data-message="Tốt"
-                                           data-value="4"></i>
-                                        <i class="star fa fa-star" title="5 stars" data-message="Rất tốt"
-                                           data-value="5"></i>
-                                    </div>
-                                    <div class="starrate">
-                                        <label>
-                                            <input class="ratevalue" type="hidden" name="rate_value" value=""/>
-                                        </label>
-                                    </div>
-                                </div>
-
-                                <div class="feedback-tags">
-                                    <div class="tags-container" data-tag-set="1">
-                                        <div class="question-tag">
-                                            Tại sao bạn lại có trải nghiệm tệ?
-                                        </div>
-                                    </div>
-                                    <div class="tags-container" data-tag-set="2">
-                                        <div class="question-tag">
-                                            Tại sao bạn lại có trải nghiệm tệ?
-                                        </div>
-
-                                    </div>
-
-                                    <div class="tags-container" data-tag-set="3">
-                                        <div class="question-tag">
-                                            Tại sao bạn lại có trải nghiệm ở mức trung bình?
-                                        </div>
-                                    </div>
-                                    <div class="tags-container" data-tag-set="4">
-                                        <div class="question-tag">
-                                            Tại sao bạn lại đánh giá sản phẩm tốt?
-                                        </div>
-                                    </div>
-
-                                    <div class="tags-container" data-tag-set="5">
-                                        <div class="make-compliment">
-                                            <div class="compliment-container">
-                                                Để lại bình luận chi tiết
-                                                <i class="far fa-smile-wink"></i>
-                                            </div>
-                                        </div>
-                                    </div>
-
-                                    <div class="tags-box">
-                                        <input type="text" class="tag form-control" name="comment"
-                                               id="inlineFormInputName" placeholder="Nhập bình luận của bạn...">
-                                        <input type="hidden" name="product_id" value="<%=product.getId()%>"/>
-                                    </div>
-
-                                </div>
-
-                                <div class="button-box">
-                                    <input type="submit" class="done btn btn-warning" disabled="disabled"
-                                           value="Bình luận"/>
-                                </div>
-
-                                <div class="submited-box">
-                                    <div class="loader"></div>
-                                    <div class="success-message">
-                                        Cảm ơn bạn!
-                                    </div>
-                                </div>
-                            </div>
-                        </form>
-
-
-                        <%
-                            for (RateReviewModel rate : listRate) {%>
-                        <div class="product-list-comment">
-                            <div class="info-user">
-                                <img width="50px" height="50px" src="images/user/<%=rate.getUser().getAvatar()%>">
-                                <p><%=rate.getUser().getName()%>
-                                </p>
-                                <div class="rated"><%=rate.getRate()%>
-                                </div>
-                                <div class="content-comment"><%=rate.getCommentModel().getContent()%>
-                                </div>
-                                <div class="create-at"><%=rate.getCommentModel().getCreateAt()%>
-                                </div>
-                            </div>
-                        </div>
-                        <%}%>
-                    </div>
+                    <%
+                        for (RateReviewModel rate : listRate) {%>
+                    <div class="product-list-comment">
+                        <div class="info-user">
+                            <img width="50px" height="50px" src="images/user/<%=rate.getUser().getAvatar()%>">
+                            <p><%=rate.getUser().getName()%>
+                            </p>
+                            <div class="rated"><%=rate.getRate()%>
+                            </div>
+                            <div class="content-comment"><%=rate.getCommentModel().getContent()%>
+                            </div>
+                            <div class="create-at"><%=rate.getCommentModel().getCreateAt()%>
+                            </div>
+                        </div>
+                    </div>
+                    <%}%>
 
                     <div class="list-productRelated clearfix">
                         <div class="heading-title text-center">
@@ -476,8 +389,8 @@
                                             <div class="pro-text">
                                                 <a style=" color: black;
                                                   font-size: 14px;text-decoration: none;"
-                                                   href="detail-product?id-product=<%=p.getId()%>?id-product=<%=p.getId()%>"
-                                                   title="" inspiration pack>
+                                                   href="detail-product?id-product=<%=p.getId()%>"
+                                                   title="" inspiration pack><%=p.getName()%>
                                                 </a>
                                             </div>
                                             <div class="pro-price">
Index: src/main/webapp/view/web/booked.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"vn.edu.hcmuaf.fit.model.ProductModel\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.dao.BookingDAO\" %>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<%@include file=\"../../common/taglib.jsp\" %>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <%@include file=\"../../common/web/head.jsp\" %>\r\n    <title>Lịch đã đặt | Phone Care</title>\r\n\r\n</head>\r\n\r\n<body>\r\n<%\r\n    List<BookingModel> listBooked = (List<BookingModel>) request.getAttribute(\"listBooked\");\r\n//    String checkMess = request.getAttribute(\"message\") != null ? (String) request.getAttribute(\"message\") : \"\";\r\n%>\r\n<%@include file=\"../../common/web/header.jsp\" %>\r\n\r\n<!--Content-->\r\n<section class=\"h-100 gradient-custom\">\r\n\r\n    <div class=\"tab-content py-3 px-3 px-sm-0\" id=\"nav-tabContent\">\r\n        <div aria-labelledby=\"nav-week1-tab\" class=\"tab-pane fade show active\" id=\"nav-week1\"\r\n             role=\"tabpanel\">\r\n\r\n            <div class=\"row d-flex justify-content-center my-4\">\r\n                <div class=\"col-md-8\">\r\n                    <div class=\"card mb-4\">\r\n                        <div class=\"card-header py-3\">\r\n                            <h5 class=\"mb-0\">Lịch sử đã đặt </h5>\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <!-- Single item -->\r\n                            <%\r\n                                if (listBooked.size() == 0) {%>\r\n                            <div class=\"row\">\r\n                                <h1> Chưa có lịch sử đặt lịch nào!</h1>\r\n                            </div>\r\n                            <%\r\n                            } else {\r\n                                for (BookingModel booking :\r\n                                        listBooked) {\r\n                            %>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-3 col-md-12 mb-4 mb-lg-0\">\r\n                                    <!-- Image -->\r\n                                    <div class=\"bg-image hover-overlay hover-zoom ripple rounded\"\r\n                                         data-mdb-ripple-color=\"light\">\r\n                                        <img src=\"images/product/<%=booking.getAvatar()%>\" class=\"w-100\"\r\n                                             alt=\"<%=booking.getName()%>\"/>\r\n\r\n                                    </div>\r\n                                    <!-- Image -->\r\n                                </div>\r\n\r\n                                <div class=\"col-lg-5 col-md-6 mb-4 mb-lg-0\">\r\n                                    <!-- Data -->\r\n                                    <p><strong><%=booking.getName() %>\r\n                                    </strong></p>\r\n\r\n\r\n                                    <p>Ngày hẹn: <%=booking.getDate_booking() %>\r\n                                    </p>\r\n                                    <p>Tình trạng: <%=booking.getStatusBooking().getName() %>\r\n                                    </p>\r\n\r\n\r\n                                    <!-- Data -->\r\n                                </div>\r\n\r\n                                <div class=\"col-lg-4 col-md-6 mb-4 mb-lg-0\">\r\n                                    <!-- Data -->\r\n                                    <p>Số lượng: <%=booking.getQuantity() %>\r\n                                    </p>\r\n                                    <p><strong>Giá: <%=booking.getPrice() %>\r\n                                    </strong></p>\r\n\r\n\r\n                                    <!-- Price -->\r\n                                </div>\r\n                            </div>\r\n                            <!-- Single item -->\r\n\r\n                            <hr class=\"my-4\"/>\r\n                            <% }\r\n                            }%>\r\n                        </div>\r\n                    </div>\r\n                    <!--                <div class=\"card mb-4\">-->\r\n                    <!--                    <div class=\"card-body\">-->\r\n                    <!--                        <p><strong>Expected shipping delivery</strong></p>-->\r\n                    <!--                        <p class=\"mb-0\">12.10.2020 - 14.10.2020</p>-->\r\n                    <!--                    </div>-->\r\n                    <!--                </div>-->\r\n                    <div class=\"card mb-4 mb-lg-0\">\r\n                        <div class=\"card-body\">\r\n                            <p><strong>Một số phương thức thanh toán</strong></p>\r\n                            <img class=\"me-2\" width=\"45px\"\r\n                                 src=\"https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg\"\r\n                                 alt=\"Visa\"/>\r\n                            <img class=\"me-2\" width=\"45px\"\r\n                                 src=\"https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/amex.svg\"\r\n                                 alt=\"American Express\"/>\r\n                            <img class=\"me-2\" width=\"45px\"\r\n                                 src=\"https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg\"\r\n                                 alt=\"Mastercard\"/>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</section>\r\n\r\n<%@include file=\"../../common/web/footer.jsp\" %>\r\n\r\n</body>\r\n\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/web/booked.jsp b/src/main/webapp/view/web/booked.jsp
--- a/src/main/webapp/view/web/booked.jsp	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/webapp/view/web/booked.jsp	(date 1687394070176)
@@ -49,16 +49,13 @@
                                     <!-- Image -->
                                     <div class="bg-image hover-overlay hover-zoom ripple rounded"
                                          data-mdb-ripple-color="light">
-                                        <img src="images/product/<%=booking.getAvatar()%>" class="w-100"
-                                             alt="<%=booking.getName()%>"/>
-
                                     </div>
                                     <!-- Image -->
                                 </div>
 
                                 <div class="col-lg-5 col-md-6 mb-4 mb-lg-0">
                                     <!-- Data -->
-                                    <p><strong><%=booking.getName() %>
+                                    <p><strong><%=booking.getId() %>
                                     </strong></p>
 
 
@@ -67,21 +64,57 @@
                                     <p>Tình trạng: <%=booking.getStatusBooking().getName() %>
                                     </p>
 
-
+                                    <%if(booking.getStatusBooking().getId()==7){%>
+                                    <a href="rate-comment?id-product=<%=booking.getId()%>" class="btn btn-primary">Đánh giá và nhận xét</a>
+                                    <%
+                                    } %>
                                     <!-- Data -->
                                 </div>
 
                                 <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">
                                     <!-- Data -->
-                                    <p>Số lượng: <%=booking.getQuantity() %>
-                                    </p>
-                                    <p><strong>Giá: <%=booking.getPrice() %>
-                                    </strong></p>
-
-
                                     <!-- Price -->
                                 </div>
                             </div>
+
+<%--                            <div class="row">--%>
+<%--                                <div class="col-lg-3 col-md-12 mb-4 mb-lg-0">--%>
+<%--                                    <!-- Image -->--%>
+<%--                                    <div class="bg-image hover-overlay hover-zoom ripple rounded"--%>
+<%--                                         data-mdb-ripple-color="light">--%>
+<%--                                        <img src="images/product/<%=booking.getAvatar()%>" class="w-100"--%>
+<%--                                             alt="<%=booking.getName()%>"/>--%>
+
+<%--                                    </div>--%>
+<%--                                    <!-- Image -->--%>
+<%--                                </div>--%>
+
+<%--                                <div class="col-lg-5 col-md-6 mb-4 mb-lg-0">--%>
+<%--                                    <!-- Data -->--%>
+<%--                                    <p><strong><%=booking.getName() %>--%>
+<%--                                    </strong></p>--%>
+
+
+<%--                                    <p>Ngày hẹn: <%=booking.getDate_booking() %>--%>
+<%--                                    </p>--%>
+<%--                                    <p>Tình trạng: <%=booking.getStatusBooking().getName() %>--%>
+<%--                                    </p>--%>
+
+
+<%--                                    <!-- Data -->--%>
+<%--                                </div>--%>
+
+<%--                                <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">--%>
+<%--                                    <!-- Data -->--%>
+<%--                                    <p>Số lượng: <%=booking.getQuantity() %>--%>
+<%--                                    </p>--%>
+<%--                                    <p><strong>Giá: <%=booking.getPrice() %>--%>
+<%--                                    </strong></p>--%>
+
+
+<%--                                    <!-- Price -->--%>
+<%--                                </div>--%>
+<%--                            </div>--%>
                             <!-- Single item -->
 
                             <hr class="my-4"/>
Index: src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageBookingController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.controller.admin;\r\n\r\nimport vn.edu.hcmuaf.fit.bean.Log;\r\nimport vn.edu.hcmuaf.fit.dao.BookingDAO;\r\nimport vn.edu.hcmuaf.fit.dao.CategoryDAO;\r\nimport vn.edu.hcmuaf.fit.dao.CustomerDAO;\r\nimport vn.edu.hcmuaf.fit.db.DBConnect;\r\nimport vn.edu.hcmuaf.fit.model.BookingModel;\r\nimport vn.edu.hcmuaf.fit.model.CategoryModel;\r\nimport vn.edu.hcmuaf.fit.model.UserModel;\r\nimport vn.edu.hcmuaf.fit.service.BookingService;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\n@WebServlet(name = \"ManageBookingController\", value = \"/admin/manage-booking\")\r\npublic class ManageBookingController extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        UserModel user =(UserModel) session.getAttribute(\"userlogin\");\r\n\r\n\r\n        String statusParam = request.getParameter(\"status\");\r\n        String view = \"\";\r\n        List<BookingModel> listBooking = null;\r\n        List<CategoryModel> listTypeStatusBook = CategoryDAO.getListTypeStatusBooking();\r\n        if (statusParam == null) {\r\n            //get all list booking\r\n            view = \"/view/admin/manage-booked.jsp\";\r\n        } else if (statusParam.equalsIgnoreCase(\"accepted\")) {\r\n            listBooking = BookingService.getListBooking(1);\r\n\r\n            DBConnect.getInstall().insert(\r\n                    new Log(0,\r\n                            Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                            request.getRemoteAddr() == null ? \"Không xác định\" : request.getRemoteAddr(),\r\n                            request.getRequestURI(),\r\n                            \"List booking\",\r\n                            0));\r\n\r\n            view = \"/view/admin/manage-booked.jsp\";\r\n        } else if (statusParam.equalsIgnoreCase(\"wait-accept\")) {\r\n            String typeStatus = request.getParameter(\"type-status\");\r\n\r\n            if (typeStatus != null) {\r\n                System.out.println(\"change status:\"+statusParam);\r\n\r\n                String idBookingParam = request.getParameter(\"id-booking\");\r\n                if (idBookingParam != null) {\r\n                    boolean checkUpdateStatusBooking = BookingService.updateStatusBooking(typeStatus,idBookingParam);\r\n                    request.setAttribute(\"message\", checkUpdateStatusBooking);\r\n                }\r\n\r\n                DBConnect.getInstall().insert(\r\n                        new Log(0,\r\n                                Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                                request.getRemoteAddr(),request.getRequestURI(),\r\n                                \"Change statis booking: id:\" + idBookingParam,\r\n                                0));\r\n            }\r\n            listBooking = BookingService.getListBooking(0);\r\n            view = \"/view/admin/manage-confirm.jsp\";\r\n        }\r\n        else if (request.getParameter(\"action\") != null ){\r\n            if(request.getParameter(\"action\").equals(\"delete\") ){\r\n                BookingDAO dao = new BookingDAO();\r\n                dao.deleteConfirm(Integer.parseInt(request.getParameter(\"id\")));\r\n                listBooking = BookingService.getListBooking(0);\r\n\r\n                DBConnect.getInstall().insert(\r\n                        new Log(2,\r\n                                Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                                request.getRemoteAddr(),request.getRequestURI(),\r\n                                \"Delete Booking: id: \" + request.getParameter(\"id\"),\r\n                                0));\r\n            }\r\n        }\r\n        request.setAttribute(\"listTypeStatusBook\", listTypeStatusBook);\r\n        request.setAttribute(\"listBooking\", listBooking);\r\n        request.getRequestDispatcher(view).forward(request, response);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageBookingController.java b/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageBookingController.java
--- a/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageBookingController.java	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageBookingController.java	(date 1687386371670)
@@ -56,6 +56,7 @@
                 if (idBookingParam != null) {
                     boolean checkUpdateStatusBooking = BookingService.updateStatusBooking(typeStatus,idBookingParam);
                     request.setAttribute("message", checkUpdateStatusBooking);
+                    System.out.println();
                 }
 
                 DBConnect.getInstall().insert(
Index: src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageOrderController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.controller.admin;\r\n\r\nimport vn.edu.hcmuaf.fit.bean.Log;\r\nimport vn.edu.hcmuaf.fit.dao.BookingDAO;\r\nimport vn.edu.hcmuaf.fit.db.DBConnect;\r\nimport vn.edu.hcmuaf.fit.model.BookingModel;\r\nimport vn.edu.hcmuaf.fit.model.StatusBooking;\r\nimport vn.edu.hcmuaf.fit.model.UserModel;\r\nimport vn.edu.hcmuaf.fit.service.BookingService;\r\nimport vn.edu.hcmuaf.fit.service.ExportService;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\n@WebServlet(name = \"ManageOrderController\", value = \"/admin/manage-order\")\r\npublic class ManageOrderController extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        UserModel user =(UserModel) session.getAttribute(\"userlogin\");\r\n        String typeParam = request.getParameter(\"type\");\r\n        String view = \"/view/admin/manage-order.jsp\";\r\n        if (typeParam != null) {\r\n            if (typeParam.equals(\"delete\")) {\r\n                BookingDAO dao = new BookingDAO();\r\n                dao.deleteConfirm(Integer.parseInt(request.getParameter(\"id\")));\r\n            } else if (typeParam.equals(\"list\")) {\r\n                String idBooking = request.getParameter(\"id-booking\");\r\n                if (idBooking != null) {\r\n                    request.setAttribute(\"idBooking\", idBooking);\r\n                    request.setAttribute(\"listDetailBooking\", BookingService.getListDetailBooking(idBooking));\r\n                    view = \"/view/admin/listDetailBooking.jsp\";\r\n                }\r\n            } else if (typeParam.equals(\"edit\")) {\r\n                String idBooking = request.getParameter(\"id-booking\");\r\n                if (idBooking != null) {\r\n                    request.setAttribute(\"bookingCurrent\", BookingService.getConfirm(idBooking));\r\n                    view = \"/view/admin/edit-confirm.jsp\";\r\n                }\r\n            } else if (typeParam.equals(\"add\")) {\r\n                view = \"/view/admin/add-booking.jsp\";\r\n            }else if (typeParam.equals(\"exportExcel\")) {\r\n                ExportService.exportOrder(request,response);\r\n            } else if(typeParam.equals(\"exportExcelDetail\")){\r\n                String idBooking = request.getParameter(\"idBooking\");\r\n                ExportService.exportOrderDetail(idBooking, request, response);\r\n                DBConnect.getInstall().insert(\r\n                        new Log(0,\r\n                                Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                                request.getRemoteAddr(),request.getRequestURI(),\r\n                                \"Export Data Detail Booking id: \"  + idBooking,\r\n                                0));\r\n            }\r\n        }\r\n\r\n        List<BookingModel> listBooking = BookingService.getListBooking();\r\n        request.setAttribute(\"listBooking\", listBooking);\r\n\r\n        request.getRequestDispatcher(view).forward(request, response);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        UserModel user =(UserModel) session.getAttribute(\"userlogin\");\r\n\r\n        String typeParam = request.getParameter(\"type\");\r\n        if (typeParam != null) {\r\n            if (typeParam.equals(\"edit\")) {\r\n                String idBooking = request.getParameter(\"id-booking\");\r\n                if (idBooking != null) {\r\n                    String id = request.getParameter(\"id-booking\");\r\n                    String desc = request.getParameter(\"description\");\r\n                    String date = request.getParameter(\"date\");\r\n                    int status = Integer.parseInt(request.getParameter(\"status\"));\r\n                    String username = request.getParameter(\"username\");\r\n                    String email = request.getParameter(\"email\");\r\n                    String tel = request.getParameter(\"tel\");\r\n                    String address = request.getParameter(\"address\");\r\n\r\n                    BookingModel bookingModel = new BookingModel();\r\n                    bookingModel.setId(id);\r\n                    bookingModel.setDate_booking(date);\r\n                    bookingModel.setDescription(desc);\r\n                    StatusBooking statusBooking = new StatusBooking();\r\n                    statusBooking.setId(status);\r\n                    bookingModel.setStatusBooking(statusBooking);\r\n                    bookingModel.setUsername(username);\r\n                    bookingModel.setEmail(email);\r\n                    bookingModel.setTel(tel);\r\n                    bookingModel.setAddress(address);\r\n                    BookingService.updateBooking(bookingModel);\r\n\r\n                    DBConnect.getInstall().insert(\r\n                            new Log(1,\r\n                                    Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                                    request.getRemoteAddr(),request.getRequestURI(),\r\n                                    \"Update Booking id: \"  + idBooking+\", desc: \" +desc +\", date: \" +date+\", status: \"+ status+\", username: \"+username + \", email: \"+email +\", tel: \" + tel + \"address: \" +address ,\r\n                                    0));\r\n                    response.sendRedirect(request.getContextPath() + \"/admin/manage-order?type=edit&id-booking=\" + id);\r\n                }\r\n            } else if (typeParam.equals(\"add\")) {\r\n                String idBooking = request.getParameter(\"id-booking\");\r\n                if (idBooking != null) {\r\n                    String id = request.getParameter(\"id-booking\");\r\n                    String desc = request.getParameter(\"description\");\r\n                    String date = request.getParameter(\"date\");\r\n                    int status = Integer.parseInt(request.getParameter(\"status\"));\r\n                    String username = request.getParameter(\"username\");\r\n                    String email = request.getParameter(\"email\");\r\n                    String tel = request.getParameter(\"tel\");\r\n                    String address = request.getParameter(\"address\");\r\n                    BookingService.insertBooking(id, user.getId(), \"1\", date, desc, status, username, email, tel, address);\r\n                    DBConnect.getInstall().insert(\r\n                            new Log(0,\r\n                                    Integer.parseInt(user == null ? \"-1\" : user.getId()),\r\n                                    request.getRemoteAddr(),request.getRequestURI(),\r\n                                    \"Add Booking id: \"  + idBooking+\", desc: \" +desc +\", date: \" +date+\", status: \"+ status+\", username: \"+username + \", email: \"+email +\", tel: \" + tel + \"address: \" +address ,\r\n                                    0));\r\n                    response.sendRedirect(request.getContextPath() + \"/admin/manage-order\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageOrderController.java b/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageOrderController.java
--- a/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageOrderController.java	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/java/vn/edu/hcmuaf/fit/controller/admin/ManageOrderController.java	(date 1687388702941)
@@ -2,8 +2,10 @@
 
 import vn.edu.hcmuaf.fit.bean.Log;
 import vn.edu.hcmuaf.fit.dao.BookingDAO;
+import vn.edu.hcmuaf.fit.dao.CategoryDAO;
 import vn.edu.hcmuaf.fit.db.DBConnect;
 import vn.edu.hcmuaf.fit.model.BookingModel;
+import vn.edu.hcmuaf.fit.model.CategoryModel;
 import vn.edu.hcmuaf.fit.model.StatusBooking;
 import vn.edu.hcmuaf.fit.model.UserModel;
 import vn.edu.hcmuaf.fit.service.BookingService;
@@ -26,6 +28,7 @@
         UserModel user =(UserModel) session.getAttribute("userlogin");
         String typeParam = request.getParameter("type");
         String view = "/view/admin/manage-order.jsp";
+        List<CategoryModel> listTypeStatusBook = CategoryDAO.getListTypeStatusBooking();
         if (typeParam != null) {
             if (typeParam.equals("delete")) {
                 BookingDAO dao = new BookingDAO();
@@ -61,6 +64,7 @@
 
         List<BookingModel> listBooking = BookingService.getListBooking();
         request.setAttribute("listBooking", listBooking);
+        request.setAttribute("listTypeStatusBook", listTypeStatusBook);
 
         request.getRequestDispatcher(view).forward(request, response);
     }
Index: src/main/java/vn/edu/hcmuaf/fit/controller/web/LogisticAPIController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.controller.web;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonObject;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.client.HttpClient;\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.impl.client.HttpClientBuilder;\r\nimport org.apache.http.util.EntityUtils;\r\nimport org.json.JSONObject;\r\nimport vn.edu.hcmuaf.fit.constant.APIConstants;\r\nimport vn.edu.hcmuaf.fit.model.BookingModel;\r\nimport vn.edu.hcmuaf.fit.model.ProductCartModel;\r\nimport vn.edu.hcmuaf.fit.service.BookingService;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.io.*;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.MalformedURLException;\r\nimport java.net.ProtocolException;\r\nimport java.net.URL;\r\n\r\n@WebServlet(name = \"LogisticAPIController\", value = \"/api/logistic\")\r\n\r\npublic class LogisticAPIController extends HttpServlet {\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        response.setContentType(\"application/json\");\r\n\r\n        String param = request.getParameter(\"action\");\r\n        if (\"province\".equals(param)) {\r\n            doGetProvince(request, response);\r\n        }\r\n    }\r\n\r\n    private void doGetProvince(HttpServletRequest request, HttpServletResponse response) throws IOException {\r\n        String paramToken = request.getParameter(\"logisticIDToken\");\r\n\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/province\";\r\n\r\n        HttpClient client = HttpClientBuilder.create().build();\r\n        HttpGet req = new HttpGet(apiURL);\r\n        String token = (String) APIConstants.LOGISTIC_ID_TOKEN;\r\n        req.addHeader(\"Authorization\", \"Bearer \" + paramToken);\r\n\r\n\r\n        try {\r\n            HttpResponse res = client.execute(req);\r\n            String responseString = EntityUtils.toString(res.getEntity(), \"UTF-8\");\r\n\r\n            PrintWriter out = response.getWriter();\r\n            out.println(responseString);\r\n            out.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        response.setContentType(\"application/json\");\r\n\r\n        String param = request.getParameter(\"action\");\r\n        String logisticIDToken = request.getParameter(\"logisticIDToken\");\r\n        String fromDistrictID = request.getParameter(\"from_district_id\");\r\n        String fromWardID = request.getParameter(\"from_ward_id\");\r\n        String toDistrictID = request.getParameter(\"to_district_id\");\r\n        String toWardID = request.getParameter(\"to_ward_id\");\r\n        String height = request.getParameter(\"height\");\r\n        String length = request.getParameter(\"length\");\r\n        String width = request.getParameter(\"width\");\r\n        String weight = request.getParameter(\"weight\");\r\n        String idBooking = request.getParameter(\"idBooking\");\r\n\r\n        if (\"login\".equals(param)) {\r\n            doPostLogin(request, response);\r\n        }\r\n        //        get data lead time\r\n        else if (\"leadTime\".equals(param))\r\n            doPostLeadTime(response, logisticIDToken, fromDistrictID, fromWardID, toDistrictID, toWardID, height, length, width, weight);\r\n        else if (\"calculateFee\".equals(param))\r\n            doPostCalculateFee(response, logisticIDToken, fromDistrictID, fromWardID, toDistrictID, toWardID, height, length, width, weight);\r\n        else if (\"registerTransport\".equals(param))\r\n            registerTransport(response, idBooking, logisticIDToken, fromDistrictID, fromWardID, toDistrictID, toWardID, height, length, width, weight);\r\n        else if (\"allTransports\".equals(param))\r\n            doPostAllTransports(request, response, logisticIDToken);\r\n        else if (\"getInfoTransport\".equals(param))\r\n            doPostGetInfoTransport(request, response, logisticIDToken);\r\n    }\r\n\r\n    private void doPostAllTransports(HttpServletRequest request, HttpServletResponse response, String logisticIDToken) throws IOException {\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/allTransports\";\r\n        StringBuilder strBuf = new StringBuilder();\r\n\r\n        HttpURLConnection conn = null;\r\n        try {\r\n            URL url = new URL(apiURL);\r\n            conn = (HttpURLConnection) url.openConnection();\r\n            conn.setRequestMethod(\"GET\");\r\n            conn.setRequestProperty(\"Content-Type\", \"application/json; utf-8\");\r\n            conn.setRequestProperty(\"Authorization\", \"Bearer \" + logisticIDToken);\r\n\r\n            if (conn.getResponseCode() != 200) {\r\n                throw new RuntimeException(\"HTTP Request Failed with Error code : \"\r\n                        + conn.getResponseCode());\r\n            }\r\n\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n        } catch (MalformedURLException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (conn != null) {\r\n                conn.disconnect();\r\n            }\r\n        }\r\n\r\n        Gson gson = new Gson();\r\n        JsonObject jsonRes = gson.fromJson(strBuf.toString(), JsonObject.class);\r\n\r\n        PrintWriter out = response.getWriter();\r\n\r\n        out.println(strBuf);\r\n        out.close();\r\n    }\r\n\r\n    public void doPostLeadTime(HttpServletResponse response, String logisticIDToken, String fromDistrictID, String fromWardID, String toDistrictID, String toWardID, String height, String length, String width, String weight) throws IOException {\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/leadTime\";\r\n        String param = \"?from_district_id=\" + fromDistrictID + \"&from_ward_id=\" + fromWardID + \"&to_district_id=\" + toDistrictID + \"&to_ward_id=\" + toWardID + \"&height=\" + height + \"&length=\" + length + \"&width=\" + width + \"&weight=\" + weight;\r\n        StringBuilder strBuf = new StringBuilder();\r\n\r\n        URL url = new URL(apiURL + param);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(\"POST\");\r\n        conn.setRequestProperty(\"Authorization\", \"Bearer \" + logisticIDToken);\r\n        int responseCode = conn.getResponseCode();\r\n        System.out.println(\"responseCode \" + responseCode);\r\n\r\n        if (responseCode == 200 | responseCode == 201) {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), \"utf-8\"));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n            PrintWriter out = response.getWriter();\r\n            out.println(strBuf.toString());\r\n            out.close();\r\n        }\r\n\r\n    }\r\n\r\n    private void doPostLogin(HttpServletRequest request, HttpServletResponse response) throws IOException {\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/auth/login\";\r\n\r\n        JSONObject json = new JSONObject();\r\n        json.put(\"password\", APIConstants.LOGISTIC_PASSWORD_LOGIN);\r\n        json.put(\"email\", APIConstants.LOGISTIC_EMAIL_LOGIN);\r\n\r\n        StringBuilder strBuf = new StringBuilder();\r\n\r\n        HttpURLConnection conn = null;\r\n        try {\r\n            URL url = new URL(apiURL);\r\n            conn = (HttpURLConnection) url.openConnection();\r\n            conn.setRequestMethod(\"POST\");\r\n            conn.setRequestProperty(\"Content-Type\", \"application/json; utf-8\");\r\n            conn.setRequestProperty(\"Accept\", \"application/json\");\r\n\r\n            conn.setDoOutput(true);\r\n\r\n            try (OutputStream os = conn.getOutputStream()) {\r\n                byte[] input = json.toString().getBytes(\"utf-8\");\r\n                os.write(input, 0, input.length);\r\n            }\r\n\r\n            if (conn.getResponseCode() != 200) {\r\n                throw new RuntimeException(\"HTTP POST Request Failed with Error code : \"\r\n                        + conn.getResponseCode());\r\n            }\r\n\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n        } catch (MalformedURLException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (conn != null) {\r\n                conn.disconnect();\r\n            }\r\n        }\r\n\r\n        Gson gson = new Gson();\r\n        JsonObject jsonRes = gson.fromJson(strBuf.toString(), JsonObject.class);\r\n\r\n        APIConstants.LOGISTIC_ID_TOKEN = jsonRes.get(\"access_token\").toString();\r\n\r\n        PrintWriter out = response.getWriter();\r\n\r\n        out.println(APIConstants.LOGISTIC_ID_TOKEN);\r\n        out.close();\r\n    }\r\n\r\n    public void registerTransport(HttpServletResponse response, String idBooking, String logisticIDToken, String fromDistrictID, String fromWardID, String toDistrictID, String toWardID, String height, String length, String width, String weight) throws IOException {\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/registerTransport\";\r\n        String param = \"?from_district_id=\" + fromDistrictID + \"&from_ward_id=\" + fromWardID + \"&to_district_id=\" + toDistrictID + \"&to_ward_id=\" + toWardID + \"&height=\" + height + \"&length=\" + length + \"&width=\" + width + \"&weight=\" + weight;\r\n        StringBuilder strBuf = new StringBuilder();\r\n\r\n        URL url = new URL(apiURL + param);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(\"POST\");\r\n        conn.setRequestProperty(\"Authorization\", \"Bearer \" + logisticIDToken);\r\n        int responseCode = conn.getResponseCode();\r\n        System.out.println(\"responseCode \" + responseCode);\r\n\r\n        if (responseCode == 200 | responseCode == 201) {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), \"utf-8\"));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n            Gson gson = new Gson();\r\n            JsonObject jsonRes = gson.fromJson(strBuf.toString(), JsonObject.class);\r\n\r\n            JsonObject objTransport = jsonRes.get(\"Transport\").getAsJsonObject();\r\n            String idTransport = objTransport.get(\"id\").getAsString();\r\n            PrintWriter out = response.getWriter();\r\n            out.println(strBuf.toString());\r\n            out.close();\r\n\r\n            BookingModel bookingModel = new BookingModel();\r\n            bookingModel.setId(idBooking);\r\n            bookingModel.setIdTransport(idTransport);\r\n\r\n            BookingService.updateBookingIDTransport(bookingModel);\r\n        }\r\n\r\n    }\r\n\r\n    public void doPostCalculateFee(HttpServletResponse response, String logisticIDToken, String fromDistrictID, String fromWardID, String toDistrictID, String toWardID, String height, String length, String width, String weight) throws IOException {\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/calculateFee\";\r\n        String param = \"?from_district_id=\" + fromDistrictID + \"&from_ward_id=\" + fromWardID + \"&to_district_id=\" + toDistrictID + \"&to_ward_id=\" + toWardID + \"&height=\" + height + \"&length=\" + length + \"&width=\" + width + \"&weight=\" + weight;\r\n        StringBuilder strBuf = new StringBuilder();\r\n\r\n        URL url = new URL(apiURL + param);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(\"POST\");\r\n        conn.setRequestProperty(\"Authorization\", \"Bearer \" + logisticIDToken);\r\n        int responseCode = conn.getResponseCode();\r\n        System.out.println(\"responseCode \" + responseCode);\r\n\r\n        if (responseCode == 200 | responseCode == 201) {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), \"utf-8\"));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n            PrintWriter out = response.getWriter();\r\n            out.println(strBuf.toString());\r\n            out.close();\r\n        }\r\n\r\n    }\r\n\r\n    private void doPostGetInfoTransport(HttpServletRequest request, HttpServletResponse response, String logisticIDToken) throws IOException {\r\n        String idTransport = request.getParameter(\"id\");\r\n        String apiURL = APIConstants.LOGISTIC_HOST_API + \"/getInfoTransport\";\r\n        String param = \"?id=\" + idTransport;\r\n        StringBuilder strBuf = new StringBuilder();\r\n        PrintWriter out = response.getWriter();\r\n\r\n        URL url = new URL(apiURL + param);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(\"POST\");\r\n        conn.setRequestProperty(\"Authorization\", \"Bearer \" + logisticIDToken);\r\n        int responseCode = conn.getResponseCode();\r\n\r\n        if (responseCode == 200 | responseCode == 201) {\r\n\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), \"utf-8\"));\r\n            String inputLine;\r\n            while ((inputLine = in.readLine()) != null) {\r\n                strBuf.append(inputLine);\r\n            }\r\n        }\r\n        out.println(strBuf.toString());\r\n        out.close();\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/controller/web/LogisticAPIController.java b/src/main/java/vn/edu/hcmuaf/fit/controller/web/LogisticAPIController.java
--- a/src/main/java/vn/edu/hcmuaf/fit/controller/web/LogisticAPIController.java	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/java/vn/edu/hcmuaf/fit/controller/web/LogisticAPIController.java	(date 1687387074416)
@@ -233,13 +233,14 @@
             while ((inputLine = in.readLine()) != null) {
                 strBuf.append(inputLine);
             }
+            System.out.println(strBuf.toString());
             Gson gson = new Gson();
             JsonObject jsonRes = gson.fromJson(strBuf.toString(), JsonObject.class);
 
             JsonObject objTransport = jsonRes.get("Transport").getAsJsonObject();
             String idTransport = objTransport.get("id").getAsString();
             PrintWriter out = response.getWriter();
-            out.println(strBuf.toString());
+            out.println();
             out.close();
 
             BookingModel bookingModel = new BookingModel();
Index: src/main/webapp/view/admin/manage-booked.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"java.util.List\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.model.*\" %>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <title>Quản lý đặt lịch sửa chữa| ADMIN</title>\r\n    <%@include file=\"../../common/admin/head.jsp\" %>\r\n\r\n</head>\r\n\r\n<body onload=\"time()\" class=\"app sidebar-mini rtl\">\r\n<!-- Navbar-->\r\n<%@include file=\"../../common/admin/header.jsp\" %>\r\n<!-- Sidebar menu-->\r\n<%@include file=\"../../common/admin/sidebar.jsp\" %>\r\n<%\r\n    List<BookingModel> listBooking = (List<BookingModel>) request.getAttribute(\"listBooking\");\r\n    List<CategoryModel> listTypeStatusBook = (List<CategoryModel>) request.getAttribute(\"listTypeStatusBook\");\r\n\r\n    Boolean isGrantAdd = false;\r\n    Boolean isGrantEdit = false;\r\n    Boolean isGrantDel = false;\r\n    for (FunctionModel function : functions) {\r\n        if (function.getName().equals(\"Add\")) {\r\n            isGrantAdd = auth.getDecentralizeFuncOfRole(idRole, \"2\", function.getId());\r\n        } else if (function.getName().equals(\"Edit\")) {\r\n            isGrantEdit = auth.getDecentralizeFuncOfRole(idRole, \"2\", function.getId());\r\n        } else if (function.getName().equals(\"Delete\")) {\r\n            isGrantDel = auth.getDecentralizeFuncOfRole(idRole, \"2\", function.getId());\r\n        }\r\n    }\r\n%>\r\n<main class=\"app-content\">\r\n    <div class=\"app-title\">\r\n        <ul class=\"app-breadcrumb breadcrumb side\">\r\n            <li class=\"breadcrumb-item\">Quản lý đặt lịch Online</li>\r\n            <li class=\"breadcrumb-item\"><a href=\"#\">Danh sách đặt lịch Online</a></li>\r\n        </ul>\r\n        <div id=\"clock\"></div>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n            <div class=\"tile\">\r\n                <div class=\"tile-body\">\r\n                    <div class=\"row element-button\">\r\n                        <%--                        <div class=\"col-sm-2\">--%>\r\n\r\n                        <%--                            <a class=\"btn btn-add btn-sm\" href=\"add-booked.jsp\" title=\"Thêm\"><i--%>\r\n                        <%--                                    class=\"fas fa-plus\"></i>--%>\r\n                        <%--                                Tạo mới </a>--%>\r\n                        <%--                        </div>--%>\r\n                        <%--                        <div class=\"col-sm-2\">--%>\r\n                        <%--                            <a class=\"btn btn-delete btn-sm print-file\" type=\"button\" title=\"In\"--%>\r\n                        <%--                               onclick=\"myApp.printTable()\"><i--%>\r\n                        <%--                                    class=\"fas fa-print\"></i> In dữ liệu</a>--%>\r\n                        <%--                        </div>--%>\r\n\r\n                        <div class=\"col-sm-2\">\r\n                            <a class=\"btn btn-delete btn-sm\" type=\"button\" title=\"Xóa\" onclick=\"myFunction(this)\"><i\r\n                                    class=\"fas fa-trash-alt\"></i> Xóa tất cả </a>\r\n                        </div>\r\n                    </div>\r\n                    <table class=\"table table-hover table-bordered\" id=\"sampleTable\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th width=\"10\"><input type=\"checkbox\" id=\"all\"></th>\r\n                            <th>ID</th>\r\n                            <th>Tên người đặt</th>\r\n                            <th>Điện thoại</th>\r\n                            <th>Ngày đặt</th>\r\n                            <th>Tình trạng</th>\r\n                            <th>Mô tả</th>\r\n                            <th>Chức năng</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <%for (BookingModel booking : listBooking) {%>\r\n                        <tr>\r\n                            <td width=\"10\"><input type=\"checkbox\" name=\"checkbox\" value=\"1\"></td>\r\n                            <td name=\"id\"><%=booking.getId()%>\r\n                            </td>\r\n                            <td name=\"name\"><%=booking.getUsername()%>\r\n                            </td>\r\n                            <td name=\"phone\"><%=booking.getTel()%>\r\n                            </td>\r\n                            <td name=\"date_booking\"><%=booking.getDate_booking()%>\r\n                            </td>\r\n                            <td>\r\n                                <select class=\"select-type-booking form-control\" id=\"status\" name=\"status\"\r\n                                        onchange=\"changeStatusBooking(<%=booking.getId()%>)\">\r\n                                    <%for (CategoryModel statusBook : listTypeStatusBook) {%>\r\n                                    <option value=\"<%=statusBook.getId()%>\" <%=statusBook.getId() == booking.getStatusBooking().getId() ? \"selected\" : \"\"%>>\r\n                                        <%=statusBook.getName()%>\r\n                                    </option>\r\n                                    <%}%>\r\n                                </select>\r\n                            </td>\r\n                            <td name=\"description\"><%=booking.getDescription()%>\r\n                            </td>\r\n                            <td>\r\n                                <%--view booking--%>\r\n                                <button class=\"btn btn-primary btn-sm edit\" type=\"button\" title=\"Xem\"\r\n                                        onclick=\"openModalLogistic()\">\r\n                                    <i class=\"fa fa-eye\"></i>\r\n                                </button>\r\n                                <%--sua booking--%>\r\n                                <%if (isGrantEdit == true) {%>\r\n                                <a href=\"manage-confirm?type=edit-confirm&id-confirm=<%=booking.getId()%>\">\r\n                                    <button class=\"btn btn-primary btn-sm edit\" type=\"button\" title=\"Sửa\"\r\n                                            id=\"show-confirm\"\r\n                                            data-toggle=\"modal\" data-target=\"#ModalConfirm\"><i class=\"fas fa-edit\"></i>\r\n                                    </button>\r\n                                </a>\r\n                                <%} else {%>\r\n                                <button\r\n                                        class=\"btn btn-primary btn-sm edit\"\r\n                                        type=\"button\"\r\n                                        title=\"Không có quyền này!\"\r\n                                        style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                        disabled\r\n                                >\r\n                                    <i class=\"fas fa-edit\"></i>\r\n                                </button>\r\n                                <%}%>\r\n                                <%--                                    xóa--%>\r\n                                <%if (isGrantDel == true) {%>\r\n                                <a class=\"btn btn-primary btn-sm trash\" type=\"button\" title=\"Xóa\"\r\n                                   href=\"manage-booking?status=wait-accept&action=delete&id=<%=booking.getId()%>\"><i\r\n                                        class=\"fas fa-trash-alt\"></i></a>\r\n                                <%} else {%>\r\n                                <button\r\n                                        class=\"btn btn-primary btn-sm trash\"\r\n                                        type=\"button\"\r\n                                        title=\"Không có quyền này!\"\r\n                                        style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                        disabled\r\n                                >\r\n                                    <i class=\"fas fa-trash-alt\"></i>\r\n                                </button>\r\n                                <%}%>\r\n                            </td>\r\n                        </tr>\r\n                        <%}%>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</main>\r\n\r\n<!-- MODAL EDIT BASIC -->\r\n<button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\r\n    Launch demo modal\r\n</button>\r\n\r\n<!-- Modal -->\r\n<div class=\"modal fade\" id=\"modalLogistic\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"static\"\r\n     data-keyboard=\"false\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <form method=\"POST\">\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group  col-md-12\">\r\n                          <span class=\"thong-tin-thanh-toan\">\r\n                            <h5>Chỉnh sửa thông tin sản phẩm cơ bản</h5>\r\n                          </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"idModal\">Mã sản phẩm </label>\r\n                            <input class=\"form-control\" type=\"number\" value=\"\" id=\"idModal\" name=\"idModal\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"nameModal\">Tên sản phẩm</label>\r\n                            <input class=\"form-control\" type=\"text\" required\r\n                                   value=\"\" id=\"nameModal\" name=\"nameModal\">\r\n                        </div>\r\n                        <div class=\"form-group  col-md-6\">\r\n                            <label class=\"control-label\" for=\"brandModal\">Thương hiệu</label>\r\n                            <select class=\"form-control\" id=\"brandModal\" name=\"brandModal\">\r\n                            </select>\r\n\r\n                        </div>\r\n                        <div class=\"form-group col-md-6 \">\r\n                            <label for=\"statusModal\" class=\"control-label\" for=\"statusModal\">Tình trạng sản phẩm</label>\r\n                            <select class=\"form-control\" id=\"statusModal\" name=\"statusModal\">\r\n                                <option value=\"1\">Còn hàng</option>\r\n                                <option value=\"0\">Hết hàng</option>\r\n                                <option value=\"-1\">Ngưng hoạt động</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"priceModal\">Giá bán</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"priceModal\" name=\"priceModal\" value=\"300.000đ\">\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label for=\"categoryModal\" class=\"control-label\">Danh mục</label>\r\n                            <select class=\"form-control\" id=\"categoryModal\" name=\"categoryModal\">\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <a class=\"urlEditBasic\"\r\n                       style=\"float: right;font-weight: 600;color: #ea0000;\">Chỉnh sửa sản phẩm nâng cao</a>\r\n                    <BR>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-save\" type=\"button\" onclick=\"save()\">Lưu lại</button>\r\n                    <span class=\"close\" onclick=\"closeModal()\">Đóng</span>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!--\r\n<%@include file=\"../../common/admin/script.jsp\" %>\r\n-->\r\n\r\n<script>\r\n    async function changeStatusBooking(idBooking) {\r\n        let value = $('#status').val()\r\n        await $.ajax({\r\n            type: 'GET',\r\n            url: `<%=request.getContextPath()%>/admin/manage-booking?status=wait-accept&type-status=${value}&id-booking=${idBooking}`,\r\n            success: function () {\r\n                swal(\"Thay đổi trạng thái đơn hàng thành công!\", {\r\n                    title: \"Thông báo\",\r\n                    buttons: false,\r\n                    timer: 3000,\r\n                    icon: \"success\",\r\n                });\r\n            }\r\n        });\r\n        location.reload()\r\n    }\r\n</script>\r\n\r\n</body>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/admin/manage-booked.jsp b/src/main/webapp/view/admin/manage-booked.jsp
--- a/src/main/webapp/view/admin/manage-booked.jsp	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/webapp/view/admin/manage-booked.jsp	(date 1687389012141)
@@ -1,6 +1,8 @@
 <%@ page import="java.util.List" %>
 <%@ page import="vn.edu.hcmuaf.fit.model.*" %>
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
+<%@ page import="vn.edu.hcmuaf.fit.constant.APIConstants" %>
+
 <!DOCTYPE html>
 <html lang="en">
 
@@ -100,10 +102,11 @@
                             <td name="description"><%=booking.getDescription()%>
                             </td>
                             <td>
-                                <%--view booking--%>
-                                <button class="btn btn-primary btn-sm edit" type="button" title="Xem"
-                                        onclick="openModalLogistic()">
-                                    <i class="fa fa-eye"></i>
+                                <%--view transport --%>
+                                <button class="btn btn-primary btn-sm edit" type="button" title="Thông tin vận chuyển" id="show-emp"
+                                        data-toggle="modal" data-target="#ModalViewTransport"
+                                        onclick="handleClickViewTransport(`<%=booking.getIdTransport()%>`)"
+                                ><i class="fa fa-eye"></i>
                                 </button>
                                 <%--sua booking--%>
                                 <%if (isGrantEdit == true) {%>
@@ -238,6 +241,71 @@
         });
         location.reload()
     }
+    let logisticIDToken = null;
+    async function autoLoginLogisticAPI() {
+        await fetch(`<%=request.getContextPath()%>/api/logistic?action=login`, {
+            method: 'POST'
+        })
+            .then(response => response.json())
+            .then(data => {
+                logisticIDToken = data
+            })
+            .catch(error => {
+                console.log(error)
+            });
+    }
+    async function handleClickViewTransport(idTransport){
+        await autoLoginLogisticAPI()
+        await $.ajax({
+            type: 'POST',
+            data: {
+                'logisticIDToken': logisticIDToken,
+                'id': idTransport,
+            },
+            url: `<%=request.getContextPath()%>/api/logistic?action=getInfoTransport`,
+            success: function (response) {
+                if (response.message === 'Success') {
+                    let convertLeadTime = new Date(response.data[0].leadTime);
+                    convertLeadTime = convertLeadTime.toLocaleDateString('vi-VN');
+                    $('#ModalViewTransport #idModal').val(response.data[0].id);
+                    $('#ModalViewTransport #feeModal').val(response.data[0].fee);
+                    $('#ModalViewTransport #leadTimeModal').val(convertLeadTime);
+                    $('#ModalViewTransport #statusModal').val(response.data[0].active);
+                    $('#ModalViewTransport #createAtModal').val(response.data[0].created_at);
+                    $('#ModalViewTransport #updateAtModal').val(response.data[0].updated_at);
+
+
+                    fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/ward?districtID=${response.data[0].fromDistrictId}`, {
+                        method: 'GET',
+                        headers: {
+                            'Authorization': 'Bearer ' + logisticIDToken
+                        }
+                    })
+                        .then(response => response.json())
+                        .then(data => {
+                            $('#ModalViewTransport #fromAddress').val(data.original.data[0].WardName)
+                        })
+                        .catch(error => {
+                            console.log(error)
+                        });
+
+                    fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/ward?districtID=${response.data[0].toDistrictId}`, {
+                        method: 'GET',
+                        headers: {
+                            'Authorization': 'Bearer ' + logisticIDToken
+                        }
+                    })
+                        .then(response => response.json())
+                        .then(data => {
+                            $('#ModalViewTransport #toAddress').val(data.original.data[0].WardName)
+                        })
+                        .catch(error => {
+                            console.log(error)
+                        });
+                }
+            }
+        });
+    }
 </script>
 
 </body>
\ No newline at end of file
Index: .idea/jarRepositories.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/jarRepositories.xml b/.idea/jarRepositories.xml
new file mode 100644
--- /dev/null	(date 1687315695840)
+++ b/.idea/jarRepositories.xml	(date 1687315695840)
@@ -0,0 +1,20 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="RemoteRepositoriesConfiguration">
+    <remote-repository>
+      <option name="id" value="central" />
+      <option name="name" value="Central Repository" />
+      <option name="url" value="https://repo.maven.apache.org/maven2" />
+    </remote-repository>
+    <remote-repository>
+      <option name="id" value="central" />
+      <option name="name" value="Maven Central repository" />
+      <option name="url" value="https://repo1.maven.org/maven2" />
+    </remote-repository>
+    <remote-repository>
+      <option name="id" value="jboss.community" />
+      <option name="name" value="JBoss Community repository" />
+      <option name="url" value="https://repository.jboss.org/nexus/content/repositories/public/" />
+    </remote-repository>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/webContexts.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/webContexts.xml b/.idea/webContexts.xml
new file mode 100644
--- /dev/null	(date 1687389499196)
+++ b/.idea/webContexts.xml	(date 1687389499196)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="WebContextManager">
+    <option name="state">
+      <map>
+        <entry key="file://$PROJECT_DIR$/src/main/webapp/view/admin/manage-order.jsp" value="file://$PROJECT_DIR$/src/main/webapp/view/admin" />
+      </map>
+    </option>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/compiler.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/compiler.xml b/.idea/compiler.xml
new file mode 100644
--- /dev/null	(date 1687315695821)
+++ b/.idea/compiler.xml	(date 1687315695821)
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="CompilerConfiguration">
+    <annotationProcessing>
+      <profile name="Maven default annotation processors profile" enabled="true">
+        <sourceOutputDir name="target/generated-sources/annotations" />
+        <sourceTestOutputDir name="target/generated-test-sources/test-annotations" />
+        <outputRelativeToContentRoot value="true" />
+        <module name="TTLTW" />
+      </profile>
+    </annotationProcessing>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/.gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.gitignore b/.idea/.gitignore
new file mode 100644
--- /dev/null	(date 1687315654087)
+++ b/.idea/.gitignore	(date 1687315654087)
@@ -0,0 +1,8 @@
+# Default ignored files
+/shelf/
+/workspace.xml
+# Editor-based HTTP Client requests
+/httpRequests/
+# Datasource local storage ignored files
+/dataSources/
+/dataSources.local.xml
Index: src/main/webapp/view/admin/manage-order.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"vn.edu.hcmuaf.fit.model.BookingModel\" %>\r\n<%@ page import=\"java.util.List\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.constant.APIConstants\" %>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <title>Quản lý lịch đặt | ADMIN</title>\r\n    <%@include file=\"../../common/admin/head.jsp\" %>\r\n\r\n</head>\r\n\r\n<body onload=\"time()\" class=\"app sidebar-mini rtl\">\r\n<!-- Navbar-->\r\n<%@include file=\"../../common/admin/header.jsp\" %>\r\n<!-- Sidebar menu-->\r\n<%@include file=\"../../common/admin/sidebar.jsp\" %>\r\n<%\r\n    List<BookingModel> listBooking = (List<BookingModel>) request.getAttribute(\"listBooking\");\r\n    Boolean isGrantAdd = false;\r\n    Boolean isGrantEdit = false;\r\n    Boolean isGrantDel = false;\r\n    for (FunctionModel function : functions) {\r\n        if (function.getName().equals(\"Add\")) {\r\n            isGrantAdd = auth.getDecentralizeFuncOfRole(idRole, \"10\", function.getId());\r\n        } else if (function.getName().equals(\"Edit\")) {\r\n            isGrantEdit = auth.getDecentralizeFuncOfRole(idRole, \"10\", function.getId());\r\n        } else if (function.getName().equals(\"Delete\")) {\r\n            isGrantDel = auth.getDecentralizeFuncOfRole(idRole, \"10\", function.getId());\r\n        }\r\n    }\r\n%>\r\n<main class=\"app-content\">\r\n    <div class=\"app-title\">\r\n        <ul class=\"app-breadcrumb breadcrumb side\">\r\n            <li class=\"breadcrumb-item\"><a href=\"manage-order\">Quản lý đơn hàng</a></li>\r\n            <li class=\"breadcrumb-item\"><a href=\"#\">Danh sách đơn hàng</a></li>\r\n        </ul>\r\n        <div id=\"clock\"></div>\r\n    </div>\r\n\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n            <div class=\"tile\">\r\n                <div class=\"tile-body\">\r\n                    <div class=\"row element-button\">\r\n                        <div class=\"col-sm-2\">\r\n                            <%--Tạo đơn hàng--%>\r\n                            <%if (isGrantAdd == true) {%>\r\n                            <a class=\"btn btn-add btn-sm\" href=\"manage-order?type=add\" title=\"Thêm\"><i\r\n                                    class=\"fas fa-plus\"></i>\r\n                                Tạo mới đơn hàng</a>\r\n                            <%} else {%>\r\n                            <button\r\n                                    class=\"btn btn-add btn-sm\"\r\n                                    type=\"button\"\r\n                                    title=\"Không có quyền này!\"\r\n                                    style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                    disabled\r\n                            >\r\n                                <i class=\"fas fa-plus\"></i> Tạo mới đơn hàng\r\n                            </button>\r\n                            <%}%>\r\n                        </div>\r\n\r\n\r\n                        <%--                        <div class=\"col-sm-2\">--%>\r\n                        <%--                            <a class=\"btn btn-delete btn-sm print-file\" type=\"button\" title=\"In\"--%>\r\n                        <%--                               onclick=\"myApp.printTable()\"><i--%>\r\n                        <%--                                    class=\"fas fa-print\"></i> In dữ liệu</a>--%>\r\n                        <%--                        </div>--%>\r\n\r\n\r\n                        <div class=\"col-sm-2\">\r\n                            <a href=\"manage-order?type=delete-all\" class=\"btn btn-delete btn-sm\" type=\"button\"\r\n                               title=\"Xóa\"\r\n                               onclick=\"myFunction(this)\"><i\r\n                                    class=\"fas fa-trash-alt\"></i> Xóa tất cả </a>\r\n                        </div>\r\n\r\n                        <div class=\"col-sm-2\">\r\n                            <a href=\"manage-order?type=exportExcel\" class=\"btn\" type=\"button\" title=\"Xuất dữ liệu\"\r\n                               style=\"line-height: 0px;border: 1px solid #000000; font-size: 13px; padding: 5px 10px\"\r\n                            ><i class='bx bxs-file-export'></i> Xuất Excel</a>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <table class=\"table table-hover table-bordered\" id=\"sampleTable\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th width=\"10\"><input type=\"checkbox\" id=\"all\"></th>\r\n                            <th>ID</th>\r\n                            <th>Tên người đặt</th>\r\n                            <th>Điện thoại</th>\r\n                            <th>Ngày đặt</th>\r\n                            <th>Tình trạng</th>\r\n                            <th>Mô tả</th>\r\n                            <th>Tính năng</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <%for (BookingModel booking : listBooking) {%>\r\n                        <tr>\r\n                            <td width=\"10\"><input type=\"checkbox\" name=\"check1\" value=\"1\"></td>\r\n                            <td name=\"id\"><%=booking.getId()%>\r\n                            </td>\r\n                            <td name=\"name\"><%=booking.getUsername()%>\r\n                            </td>\r\n                            <td name=\"phone\"><%=booking.getTel()%>\r\n                            </td>\r\n                            <td name=\"date_booking\"><%=booking.getDate_booking()%>\r\n                            </td>\r\n                            <td>\r\n                                <select class=\"form-control\" id=\"status\" name=\"status\">\r\n                                    <option value=\"1\" <%=listBooking == null ? \"\" : (booking.getStatusBooking().getId() == 1 ? \"selected\" : \"\") %>>\r\n                                        Đã xác nhận\r\n                                    </option>\r\n                                    <option value=\"0\" <%=listBooking == null ? \"\" : (booking.getStatusBooking().getId() == 0 ? \"selected\" : \"\") %>>\r\n                                        Chờ xác nhận\r\n                                    </option>\r\n                                    <option value=\"-1\" <%=listBooking == null ? \"\" : (booking.getStatusBooking().getId() == -1 ? \"selected\" : \"\") %>>\r\n                                        Đã hủy\r\n                                    </option>\r\n                                </select>\r\n                            </td>\r\n                            <td name=\"description\"><%=booking.getDescription()%>\r\n                            </td>\r\n                            <td>\r\n                                <%--view transport --%>\r\n                                <button class=\"btn btn-primary btn-sm edit\" type=\"button\" title=\"Thông tin vận chuyển\" id=\"show-emp\"\r\n                                        data-toggle=\"modal\" data-target=\"#ModalViewTransport\"\r\n                                        onclick=\"handleClickViewTransport(`<%=booking.getIdTransport()%>`)\"\r\n                                ><i class=\"fa fa-eye\"></i>\r\n                                </button>\r\n                                <%--                    xóa sửa--%>\r\n                                <a class=\"btn btn-primary btn-sm warning\" type=\"button\" title=\"Danh sách\"\r\n                                   href=\"manage-order?type=list&id-booking=<%=booking.getId()%>\"><i\r\n                                        class=\"fas fa-folder\"></i></a>\r\n                                <%-- Xóa đơn hàng  --%>\r\n                                <%if (isGrantDel == true) {%>\r\n                                <a class=\"btn btn-primary btn-sm trash\" type=\"button\" title=\"Xóa\"\r\n                                   href=\"manage-order?type=delete&id-booking=<%=booking.getId()%>\"><i\r\n                                        class=\"fas fa-trash-alt\"></i></a>\r\n                                <%} else {%>\r\n                                <button\r\n                                        class=\"btn btn-primary btn-sm trash\"\r\n                                        type=\"button\"\r\n                                        title=\"Không có quyền này!\"\r\n                                        style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                        disabled\r\n                                >\r\n                                    <i class=\"fas fa-trash-alt\"></i>\r\n                                </button>\r\n                                <%}%>\r\n                                <%--  Sửa đơn hàng  --%>\r\n                                <%if (isGrantEdit == true) {%>\r\n                                <a class=\"btn btn-primary btn-sm edit\" type=\"button\" title=\"Sửa\"\r\n                                   href=\"manage-order?type=edit&id-booking=<%=booking.getId()%>\"><i\r\n                                        class=\"fas fa-edit\"></i>\r\n                                </a>\r\n                                <%} else {%>\r\n                                <button\r\n                                        class=\"btn btn-primary btn-sm edit\"\r\n                                        type=\"button\"\r\n                                        title=\"Không có quyền này!\"\r\n                                        style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                        disabled\r\n                                >\r\n                                    <i class=\"fas fa-edit\"></i>\r\n                                </button>\r\n                                <%}%>\r\n                            </td>\r\n                        </tr>\r\n                        <%}%>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</main>\r\n\r\n<!-- MODAL EDIT BASIC -->\r\n<div class=\"modal fade\" id=\"ModalViewTransport\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"static\"\r\n     data-keyboard=\"false\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <form method=\"POST\">\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group  col-md-12\">\r\n                          <span class=\"thong-tin-thanh-toan\">\r\n                            <h5>Thông tin vận chuyển đơn hàng</h5>\r\n                          </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"idModal\">Mã vận chuyển </label>\r\n                            <input class=\"form-control\" type=\"text\" value=\"\" id=\"idModal\" name=\"idModal\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"fromAddress\">Địa chỉ từ</label>\r\n                            <input class=\"form-control\" type=\"text\" required\r\n                                   value=\"\" id=\"fromAddress\" name=\"fromAddress\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group  col-md-6\">\r\n                            <label class=\"control-label\" for=\"toAddress\">Địa chỉ đến</label>\r\n                            <input class=\"form-control\" type=\"text\" required\r\n                                   value=\"\" id=\"toAddress\" name=\"toAddress\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6 \">\r\n                            <label for=\"statusModal\" class=\"control-label\" for=\"statusModal\">Tình trạng đơn hàng</label>\r\n                            <select class=\"form-control\" id=\"statusModal\" name=\"statusModal\">\r\n                                <option value=\"1\">Đang vận chuyển</option>\r\n                                <option value=\"0\">Chờ xử lý</option>\r\n                                <option value=\"-1\">Đã hủy</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"feeModal\">Chi phí vận chuyển</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"feeModal\" name=\"feeModal\" value=\"\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label for=\"leadTimeModal\" class=\"control-label\">Thời gian dự kiến đến</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"leadTimeModal\" name=\"leadTimeModal\" value=\"\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label for=\"createAtModal\" class=\"control-label\">Ngày tạo</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"createAtModal\" name=\"createAtModal\" value=\"\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label for=\"updateAtModal\" class=\"control-label\">Ngày cập nhật</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"updateAtModal\" name=\"updateAtModal\" value=\"\" disabled>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <a class=\"btn btn-cancel\" data-dismiss=\"modal\" href=\"#\">Đóng</a>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<%@include file=\"../../common/admin/script.jsp\" %>\r\n<script>\r\n    let logisticIDToken = null;\r\n    async function autoLoginLogisticAPI() {\r\n        await fetch(`<%=request.getContextPath()%>/api/logistic?action=login`, {\r\n            method: 'POST'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                logisticIDToken = data\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            });\r\n    }\r\n    async function handleClickViewTransport(idTransport){\r\n        await autoLoginLogisticAPI()\r\n        await $.ajax({\r\n            type: 'POST',\r\n            data: {\r\n                'logisticIDToken': logisticIDToken,\r\n                'id': idTransport,\r\n            },\r\n            url: `<%=request.getContextPath()%>/api/logistic?action=getInfoTransport`,\r\n            success: function (response) {\r\n                if (response.message === 'Success') {\r\n                    let convertLeadTime = new Date(response.data[0].leadTime);\r\n                    convertLeadTime = convertLeadTime.toLocaleDateString('vi-VN');\r\n                    $('#ModalViewTransport #idModal').val(response.data[0].id);\r\n                    $('#ModalViewTransport #feeModal').val(response.data[0].fee);\r\n                    $('#ModalViewTransport #leadTimeModal').val(convertLeadTime);\r\n                    $('#ModalViewTransport #statusModal').val(response.data[0].active);\r\n                    $('#ModalViewTransport #createAtModal').val(response.data[0].created_at);\r\n                    $('#ModalViewTransport #updateAtModal').val(response.data[0].updated_at);\r\n\r\n\r\n                    fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/ward?districtID=${response.data[0].fromDistrictId}`, {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Authorization': 'Bearer ' + logisticIDToken\r\n                        }\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            $('#ModalViewTransport #fromAddress').val(data.original.data[0].WardName)\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error)\r\n                        });\r\n\r\n                    fetch(`<%=APIConstants.LOGISTIC_HOST_API%>/ward?districtID=${response.data[0].toDistrictId}`, {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Authorization': 'Bearer ' + logisticIDToken\r\n                        }\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            $('#ModalViewTransport #toAddress').val(data.original.data[0].WardName)\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error)\r\n                        });\r\n                }\r\n            }\r\n        });\r\n    }\r\n</script>\r\n\r\n</body>\r\n\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/admin/manage-order.jsp b/src/main/webapp/view/admin/manage-order.jsp
--- a/src/main/webapp/view/admin/manage-order.jsp	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/webapp/view/admin/manage-order.jsp	(date 1687389499075)
@@ -1,5 +1,6 @@
 <%@ page import="vn.edu.hcmuaf.fit.model.BookingModel" %>
 <%@ page import="java.util.List" %>
+<%@ page import="vn.edu.hcmuaf.fit.model.*" %>
 <%@ page import="vn.edu.hcmuaf.fit.constant.APIConstants" %>
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
 <!DOCTYPE html>
@@ -8,7 +9,8 @@
 <head>
     <title>Quản lý lịch đặt | ADMIN</title>
     <%@include file="../../common/admin/head.jsp" %>
-
+<%    List<CategoryModel> listTypeStatusBook = (List<CategoryModel>) request.getAttribute("listTypeStatusBook");
+%>
 </head>
 
 <body onload="time()" class="app sidebar-mini rtl">
@@ -114,16 +116,12 @@
                             <td name="date_booking"><%=booking.getDate_booking()%>
                             </td>
                             <td>
-                                <select class="form-control" id="status" name="status">
-                                    <option value="1" <%=listBooking == null ? "" : (booking.getStatusBooking().getId() == 1 ? "selected" : "") %>>
-                                        Đã xác nhận
-                                    </option>
-                                    <option value="0" <%=listBooking == null ? "" : (booking.getStatusBooking().getId() == 0 ? "selected" : "") %>>
-                                        Chờ xác nhận
+                                <select class="form-control" id="status" name="status" onchange="changeStatusBooking(<%=booking.getId()%>)">
+                                    <%for (CategoryModel statusBook : listTypeStatusBook) {%>
+                                    <option value="<%=statusBook.getId()%>" <%=statusBook.getId() == booking.getStatusBooking().getId() ? "selected" : ""%>>
+                                        <%=statusBook.getName()%>
                                     </option>
-                                    <option value="-1" <%=listBooking == null ? "" : (booking.getStatusBooking().getId() == -1 ? "selected" : "") %>>
-                                        Đã hủy
-                                    </option>
+                                    <%}%>
                                 </select>
                             </td>
                             <td name="description"><%=booking.getDescription()%>
@@ -215,9 +213,11 @@
                         <div class="form-group col-md-6 ">
                             <label for="statusModal" class="control-label" for="statusModal">Tình trạng đơn hàng</label>
                             <select class="form-control" id="statusModal" name="statusModal">
-                                <option value="1">Đang vận chuyển</option>
-                                <option value="0">Chờ xử lý</option>
-                                <option value="-1">Đã hủy</option>
+                                    <%for (CategoryModel statusBook : listTypeStatusBook) {%>
+                                    <option value="<%=statusBook.getId()%>" >
+                                        <%=statusBook.getName()%>
+                                    </option>
+                                    <%}%>
                             </select>
                         </div>
                         <div class="form-group col-md-6">
@@ -250,6 +250,22 @@
 
 <%@include file="../../common/admin/script.jsp" %>
 <script>
+    async function changeStatusBooking(idBooking) {
+        let value = $('#status').val()
+        await $.ajax({
+            type: 'GET',
+            url: `<%=request.getContextPath()%>/admin/manage-booking?status=wait-accept&type-status=${value}&id-booking=${idBooking}`,
+            success: function () {
+                swal("Thay đổi trạng thái đơn hàng thành công!", {
+                    title: "Thông báo",
+                    buttons: false,
+                    timer: 3000,
+                    icon: "success",
+                });
+            }
+        });
+        location.reload()
+    }
     let logisticIDToken = null;
     async function autoLoginLogisticAPI() {
         await fetch(`<%=request.getContextPath()%>/api/logistic?action=login`, {
Index: src/main/webapp/view/admin/manage-product.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"vn.edu.hcmuaf.fit.model.ProductModel\" %>\r\n<%@ page import=\"java.util.List\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.service.ProductService\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.model.CategoryModel\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.model.CustomerModel\" %>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <title>Quản lý sản phẩm | ADMIN</title>\r\n    <%@include file=\"../../common/admin/head.jsp\" %>\r\n</head>\r\n<body onload=\"time()\" class=\"app sidebar-mini rtl\">\r\n<!-- Navbar-->\r\n<%@include file=\"../../common/admin/header.jsp\" %>\r\n\r\n<!-- Sidebar menu-->\r\n<%@include file=\"../../common/admin/sidebar.jsp\" %>\r\n\r\n<%\r\n    List<ProductModel> listProduct = (List<ProductModel>) request.getAttribute(\"listProduct\");\r\n    String pageContextPath = (String) request.getContextPath();\r\n    List<CategoryModel> categoryTypeProduct = (List<CategoryModel>) request.getAttribute(\"categoryTypeProduct\");\r\n    List<CategoryModel> listBrand = (List<CategoryModel>) request.getAttribute(\"categoryBrand\");\r\n\r\n    Boolean isGrantAdd = false;\r\n    Boolean isGrantEdit = false;\r\n    Boolean isGrantDel = false;\r\n    for(FunctionModel function : functions){\r\n        if(function.getName().equals(\"Add\")){\r\n            isGrantAdd = auth.getDecentralizeFuncOfRole(idRole,\"2\",function.getId());\r\n        }else if(function.getName().equals(\"Edit\")){\r\n            isGrantEdit = auth.getDecentralizeFuncOfRole(idRole,\"2\",function.getId());\r\n        }else if(function.getName().equals(\"Delete\")){\r\n            isGrantDel = auth.getDecentralizeFuncOfRole(idRole,\"2\",function.getId());\r\n        }\r\n    }\r\n%>\r\n\r\n<main class=\"app-content\">\r\n    <div class=\"app-title\">\r\n        <ul class=\"app-breadcrumb breadcrumb side\">\r\n            <li class=\"breadcrumb-item\">Quản lý sản phẩm</li>\r\n            <li class=\"breadcrumb-item\"><a href=\"manage-product\">Danh sách sản phẩm</a></li>\r\n        </ul>\r\n        <div id=\"clock\"></div>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n            <div class=\"tile\">\r\n                <div class=\"tile-body\">\r\n                    <div class=\"row element-button\">\r\n                        <div class=\"col-sm-2\">\r\n                            <%if(isGrantAdd == true) {%>\r\n                            <a class=\"btn btn-add btn-sm\" href=\"manage-product?type=add\" title=\"Thêm\"><i\r\n                                    class=\"fas fa-plus\"></i>\r\n                                Tạo mới sản phẩm</a>\r\n                            <%} else {%>\r\n                            <button\r\n                                    class=\"btn btn-add btn-sm\"\r\n                                    type=\"button\"\r\n                                    title=\"Không có quyền này!\"\r\n                                    style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                    disabled\r\n                            >\r\n                                <i class=\"fas fa-plus\"></i> Tạo mới sản phẩm\r\n                            </button>\r\n                            <%}%>\r\n                        </div>\r\n\r\n\r\n<%--                        <div class=\"col-sm-2\">--%>\r\n<%--                            <a class=\"btn btn-delete btn-sm print-file\" type=\"button\" title=\"In\"--%>\r\n<%--                               onclick=\"myApp.printTable()\"><i--%>\r\n<%--                                    class=\"fas fa-print\"></i> In dữ liệu</a>--%>\r\n<%--                        </div>--%>\r\n\r\n\r\n                        <div class=\"col-sm-2\">\r\n                            <a href=\"deleteAll\" class=\"btn btn-delete btn-sm\" type=\"button\" title=\"Xóa\"\r\n                               onclick=\"myFunction(this)\"><i\r\n                                    class=\"fas fa-trash-alt\"></i> Xóa tất cả </a>\r\n                        </div>\r\n\r\n                        <div class=\"col-sm-2\">\r\n                            <a href=\"manage-product?type=exportExcel\" class=\"btn\" type=\"button\" title=\"Xuất dữ liệu\" style=\"line-height: 0px;border: 1px solid #000000; font-size: 13px; padding: 5px 10px\"\r\n                            ><i class='bx bxs-file-export'></i> Xuất Excel</a>\r\n                        </div>\r\n                    </div>\r\n                    <table class=\"table table-hover table-bordered\" id=\"sampleTable\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th width=\"10\"><input type=\"checkbox\" id=\"all\"></th>\r\n                            <th>ID sản phẩm</th>\r\n                            <th>Tên sản phẩm</th>\r\n                            <th>Ảnh</th>\r\n                            <th>Số lượng</th>\r\n                            <th>Tình trạng</th>\r\n                            <th>Giá tiền</th>\r\n                            <th>Danh mục</th>\r\n                            <th>Chức năng</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <%\r\n                            if(listProduct != null)  for (ProductModel product : listProduct) {%>\r\n                        <tr class=\"product-<%=product.getId()%>\">\r\n                            <td width=\"10\"><input type=\"checkbox\" name=\"check1\" value=\"1\"></td>\r\n                            <td class=\"id\"><%=product.getId()%>\r\n                            </td>\r\n                            <td class=\"name\"><%=product.getName()%>\r\n                            </td>\r\n                            <td>\r\n                                <img\r\n                                    src=\"../images/product/<%=product.getAvatar()%>\"\r\n                                    alt=\"\" width=\"100px;\" class=\"avatar\">\r\n                            </td>\r\n                            <td class=\"quantity\">\r\n<%--                                <%=product.getSumQuantity()%>--%>\r\n                            </td>\r\n                            <td><span class=\"badge bg-success\" class=\"status\">Hoàn Thành</span></td>\r\n                            <td class=\"price\"><%=product.getPrice()%>\r\n                            </td>\r\n                            <td>\r\n                                <%\r\n                                    for (CategoryModel type : categoryTypeProduct) {\r\n                                        if (type.getId() == product.getIdTypeProduct()) {\r\n                                %>\r\n                                <%=type.getName()%>\r\n                                <%\r\n                                        }\r\n                                    }\r\n                                %>\r\n                                <input type=\"hidden\" class=\"category\" value=\"<%=product.getIdTypeProduct()%>\">\r\n                            </td>\r\n\r\n                            <td>\r\n                                <%--Xóa product--%>\r\n                                <%if(isGrantDel == true) {%>\r\n                                <a class=\"btn btn-primary btn-sm trash\" type=\"button\" title=\"Xóa\" href=\"manage-product?type=delete&id-product=<%=product.getId()%>\"><i class=\"fas fa-trash-alt\"></i></a>\r\n                                <%} else {%>\r\n                                    <button\r\n                                            class=\"btn btn-primary btn-sm trash\"\r\n                                            type=\"button\"\r\n                                            title=\"Không có quyền này!\"\r\n                                            style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                            disabled\r\n                                    >\r\n                                    <i class=\"fas fa-trash-alt\"></i>\r\n                                    </button>\r\n                                <%}%>\r\n                                <%--Sửa product--%>\r\n                                <%if(isGrantEdit == true) {%>\r\n                                    <button class=\"btn btn-primary btn-sm edit\" type=\"button\" title=\"Sửa\" id=\"show-emp\"\r\n                                            data-toggle=\"modal\" data-target=\"#ModalEditProduct\"\r\n                                            onclick=\"editProductBasic(<%=product.getId()%>)\"><i class=\"fas fa-edit\"></i>\r\n                                    </button>\r\n                                <%} else {%>\r\n                                    <button\r\n                                            class=\"btn btn-primary btn-sm edit\"\r\n                                            type=\"button\"\r\n                                            title=\"Không có quyền này!\"\r\n                                            style=\"opacity: 0.5; cursor: not-allowed;\"\r\n                                            disabled\r\n                                    >\r\n                                    <i class=\"fas fa-edit\"></i>\r\n                                    </button>\r\n                                <%}%>\r\n                            </td>\r\n                        </tr>\r\n                        <%\r\n                            }%>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</main>\r\n\r\n<!-- MODAL EDIT BASIC -->\r\n<div class=\"modal fade\" id=\"ModalEditProduct\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"static\"\r\n     data-keyboard=\"false\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <form method=\"POST\">\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group  col-md-12\">\r\n                          <span class=\"thong-tin-thanh-toan\">\r\n                            <h5>Chỉnh sửa thông tin sản phẩm cơ bản</h5>\r\n                          </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"idModal\">Mã sản phẩm </label>\r\n                            <input class=\"form-control\" type=\"number\" value=\"\" id=\"idModal\" name=\"idModal\" disabled>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"nameModal\">Tên sản phẩm</label>\r\n                            <input class=\"form-control\" type=\"text\" required\r\n                                   value=\"\" id=\"nameModal\" name=\"nameModal\">\r\n                        </div>\r\n                        <div class=\"form-group  col-md-6\">\r\n                            <label class=\"control-label\" for=\"brandModal\">Thương hiệu</label>\r\n                            <select class=\"form-control\" id=\"brandModal\" name=\"brandModal\">\r\n                                <%\r\n                                    for (CategoryModel brand : listBrand) {\r\n                                %>\r\n                                    <option value=\"<%=brand.getId()%>\"><%=brand.getName()%></option>\r\n                                <%}%>\r\n                            </select>\r\n\r\n                        </div>\r\n                        <div class=\"form-group col-md-6 \">\r\n                            <label for=\"statusModal\" class=\"control-label\" for=\"statusModal\">Tình trạng sản phẩm</label>\r\n                            <select class=\"form-control\" id=\"statusModal\" name=\"statusModal\">\r\n                                <option value=\"1\">Còn hàng</option>\r\n                                <option value=\"0\">Hết hàng</option>\r\n                                <option value=\"-1\">Ngưng hoạt động</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label class=\"control-label\" for=\"priceModal\">Giá bán</label>\r\n                            <input class=\"form-control\" type=\"text\" id=\"priceModal\" name=\"priceModal\" value=\"300.000đ\">\r\n                        </div>\r\n                        <div class=\"form-group col-md-6\">\r\n                            <label for=\"categoryModal\" class=\"control-label\">Danh mục</label>\r\n                            <select class=\"form-control\" id=\"categoryModal\" name=\"categoryModal\">\r\n                                <%\r\n                                    for (CategoryModel type : categoryTypeProduct) {\r\n                                %>\r\n                                <option value=\"<%=type.getId()%>\"><%=type.getName()%>\r\n                                </option>\r\n                                <%}%>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <a class=\"urlEditBasic\"\r\n                       style=\"float: right;font-weight: 600;color: #ea0000;\">Chỉnh sửa sản phẩm nâng cao</a>\r\n                    <BR>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-save\" type=\"button\" onclick=\"save()\">Lưu lại</button>\r\n                    <a class=\"btn btn-cancel\" data-dismiss=\"modal\" href=\"#\">Hủy bỏ</a>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<%@include file=\"../../common/admin/script.jsp\" %>\r\n<!-- Essential javascripts for application to work-->\r\n<script>\r\n\r\n    function save() {\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '<%=request.getContextPath()%>/admin/manage-product',\r\n            data: {\r\n                idModal: $('#ModalEditProduct #idModal').val(),\r\n                nameModal: $('#ModalEditProduct #nameModal').val(),\r\n                statusModal: $('#ModalEditProduct #statusModal').val(),\r\n                priceModal: $('#ModalEditProduct #priceModal').val(),\r\n                categoryModal: $('#ModalEditProduct #categoryModal').val(),\r\n                brandModal: $('#ModalEditProduct #brandModal').val(),\r\n            },\r\n            success: (result) => {\r\n                swal(\"Cập nhật thành công.!\");\r\n                setTimeout(location.reload(),1000)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    <!--MODAL-->\r\n    function editProductBasic(idProduct) {\r\n\r\n        let id = document.querySelector(`.product-${idProduct} .id`).innerText\r\n        let name = document.querySelector(`.product-${idProduct} .name`).innerText\r\n        let quantity = document.querySelector(`.product-${idProduct} .quantity`).innerText\r\n        <%--let status = document.querySelector(`.product-${idProduct} .status`).innerText--%>\r\n        let price = document.querySelector(`.product-${idProduct} .price`).innerText\r\n        let category = document.querySelector(`.product-${idProduct} .category`).value\r\n\r\n        $('#ModalEditProduct #idModal').val(id);\r\n        $('#ModalEditProduct #nameModal').val(name);\r\n        $('#ModalEditProduct #quantityModal').val(quantity);\r\n        // $('#ModalEditProduct #statusModal').val(status);\r\n        $('#ModalEditProduct #priceModal').val(price);\r\n        $('#ModalEditProduct .urlEditBasic').attr('href', `manage-product?type=edit&id-product=${idProduct}`);\r\n        $('#ModalEditProduct form').attr('action', `<%=pageContextPath%>/admin/manage-product`);\r\n\r\n        let listCategory = document.querySelectorAll('#ModalEditProduct #categoryModal option')\r\n        for (let i = 0; i < listCategory.length; i++) {\r\n            listCategory[i].value == category ? listCategory[i].selected = true : listCategory[i].selected = false\r\n        }\r\n    }\r\n\r\n</script>\r\n</body>\r\n\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/admin/manage-product.jsp b/src/main/webapp/view/admin/manage-product.jsp
--- a/src/main/webapp/view/admin/manage-product.jsp	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/webapp/view/admin/manage-product.jsp	(date 1687392803790)
@@ -218,9 +218,11 @@
                         <div class="form-group col-md-6 ">
                             <label for="statusModal" class="control-label" for="statusModal">Tình trạng sản phẩm</label>
                             <select class="form-control" id="statusModal" name="statusModal">
-                                <option value="1">Còn hàng</option>
-                                <option value="0">Hết hàng</option>
-                                <option value="-1">Ngưng hoạt động</option>
+                                <%
+                                    for (CategoryModel brand : listBrand) {
+                                %>
+                                <option value="<%=brand.getId()%>"><%=brand.getName()%></option>
+                                <%}%>
                             </select>
                         </div>
                         <div class="form-group col-md-6">
@@ -255,7 +257,7 @@
 
 <%@include file="../../common/admin/script.jsp" %>
 <!-- Essential javascripts for application to work-->
-<script>
+<script>T
 
     function save() {
         $.ajax({
Index: src/main/java/vn/edu/hcmuaf/fit/dao/BookingDAO.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.dao;\r\n\r\nimport vn.edu.hcmuaf.fit.db.ConnectToDatabase;\r\nimport vn.edu.hcmuaf.fit.db.DBConnect;\r\nimport vn.edu.hcmuaf.fit.model.BookingModel;\r\nimport vn.edu.hcmuaf.fit.model.CategoryModel;\r\nimport vn.edu.hcmuaf.fit.model.DetailBookingModel;\r\nimport vn.edu.hcmuaf.fit.model.StatusBooking;\r\n\r\nimport java.sql.*;\r\nimport java.util.LinkedList;\r\nimport java.util.List;\r\n\r\npublic class BookingDAO implements ObjectDAO {\r\n\r\n    public static List<CategoryModel> getListStatus() {\r\n        LinkedList<CategoryModel> list = new LinkedList<>();\r\n        return null;\r\n    }\r\n\r\n    public static List<BookingModel> getListBooking(int status) {\r\n        LinkedList<BookingModel> list = new LinkedList<>();\r\n\r\n        String sql = \"SELECT b.id id,date_booking, id_user ,username, id_payment, t.name nameTypePayment,description, b.status_booking id_status_booking, s.name name_status_booking,tel, from_district_id, from_ward_id,to_district_id, to_ward_id, height, length, width, weight \" +\r\n                \"FROM bookings b join type_payments t on t.id = b.id_payment \" +\r\n                \"join status_bookings s on s.id = b.status_booking \" +\r\n                \"WHERE status_booking=?\" + \"order by id desc \";\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setString(1, status + \"\");\r\n            ResultSet rs = ps.executeQuery();\r\n\r\n            while (rs.next()) {\r\n                BookingModel booking = new BookingModel();\r\n                booking.setId(rs.getString(\"id\"));\r\n                booking.setDate_booking(rs.getString(\"date_booking\"));\r\n                booking.setId_user(rs.getString(\"id_user\"));\r\n                booking.setUsername(rs.getString(\"username\"));\r\n                booking.setId_payment(rs.getString(\"id_payment\"));\r\n                booking.setNameTypePayment(rs.getString(\"nameTypePayment\"));\r\n\r\n                StatusBooking statusBooking = new StatusBooking();\r\n                statusBooking.setId(rs.getInt(\"id_status_booking\"));\r\n                statusBooking.setName(rs.getString(\"name_status_booking\"));\r\n\r\n                booking.setStatusBooking(statusBooking);\r\n                booking.setDescription(rs.getString(\"description\"));\r\n                booking.setTel(rs.getString(\"tel\"));\r\n                booking.setFromDistrictId(rs.getInt(\"from_district_id\"));\r\n                booking.setFromWardId(rs.getInt(\"from_ward_id\"));\r\n\r\n                booking.setToDistrictId(rs.getInt(\"to_district_id\"));\r\n                booking.setToWardId(rs.getInt(\"to_ward_id\"));\r\n                booking.setHeight(rs.getInt(\"height\"));\r\n                booking.setLength(rs.getInt(\"length\"));\r\n                booking.setWidth(rs.getInt(\"width\"));\r\n                booking.setWeight(rs.getInt(\"weight\"));\r\n\r\n                list.add(booking);\r\n            }\r\n            return list;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static boolean updateStatusBooking(String typeStatus, String idBookingParam) {\r\n        String sql = \"Update bookings set status_booking=? where id=?\";\r\n        try {\r\n\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setString(1, typeStatus);\r\n            ps.setString(2, idBookingParam);\r\n            ps.executeUpdate();\r\n            return true;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static List<DetailBookingModel> getListDetailBooking(String idBooking) {\r\n        List<DetailBookingModel> list = new LinkedList<>();\r\n\r\n        String sql = \"SELECT d.id id, id_booking, id_product, name, price, d.quantity quantity \" +\r\n                \"FROM detail_bookings d join products on products.id = d.id_product \" +\r\n                \"WHERE id_booking=?\" + \"order by id desc \";\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setString(1, idBooking);\r\n            ResultSet rs = ps.executeQuery();\r\n\r\n            while (rs.next()) {\r\n                DetailBookingModel detailBookingModal = new DetailBookingModel();\r\n                detailBookingModal.setId_booking(rs.getInt(\"id_booking\"));\r\n                detailBookingModal.setId_product(Integer.parseInt(rs.getString(\"id_product\")));\r\n                detailBookingModal.setQuantity(Integer.parseInt(rs.getString(\"quantity\")));\r\n                detailBookingModal.setName(rs.getString(\"name\"));\r\n                detailBookingModal.setPrice(rs.getString(\"price\"));\r\n                detailBookingModal.setId(Integer.parseInt(rs.getString(\"id\")));\r\n\r\n                list.add(detailBookingModal);\r\n            }\r\n            return list;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n\r\n    public static void insertBooking(String id, String id_user, String id_payment, String date, String desc, int status, String username, String email, String tel, String address) {\r\n        date += \":00\";\r\n        String sql = \"INSERT INTO `bookings`(`id`, `date_booking`, `id_user`, `id_payment`, `description`, `status_booking`, `username`, `email`, `tel`, `address`) \" +\r\n                \"VALUES(NULL,date_booking = ?, id_user=?, id_payment=?,description = ?, status_booking=?, username=?,email=?,tel=?, address=?\";\r\n\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setTimestamp(1, Timestamp.valueOf(date.replace(\"T\", \" \")));\r\n            ps.setString(2, id_user);\r\n            ps.setString(3, id_payment);\r\n\r\n            ps.setString(4, desc);\r\n            ps.setInt(5, status);\r\n            ps.setString(6, username);\r\n            ps.setString(7, email);\r\n            ps.setString(8, tel);\r\n            ps.setString(9, address);\r\n            ps.executeUpdate();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n//\r\n//    public void addCustomer(String name, String tel, String email, String address) {\r\n////        String sql = \"insert into customer(username,address,email,tel,id_user) values (?,?,?,?,?)\";\r\n//        String sql = \"INSERT INTO booking \" +\r\n//                \"VALUES (NULL, ?, ?, ?,?,?,?,?,?,?)\";\r\n//        Connection connect = ConnectToDatabase.getConnect();\r\n//        try {\r\n//            PreparedStatement ppstm = connect.prepareStatement(sql);\r\n//            ppstm.setString(1, booking.getDate_booking());\r\n//\r\n//            ppstm.setString(2,booking.getid_user());\r\n//            ppstm.setString(3, booking.getId_payment());\r\n//            ppstm.setString(4, booking.getDescription());\r\n//            ppstm.setString(5, \"1\");\r\n//            ppstm.setString(6, booking.getUsername());\r\n//            ppstm.setString(7, booking.getEmail());\r\n//            ppstm.setString(8, booking.getTel());\r\n//            ppstm.setString(9, booking.getAddress());\r\n//\r\n//            ppstm.executeUpdate();\r\n//\r\n//\r\n//        } catch (Exception e) {\r\n//            System.out.println(\"Error when addCustomer:\" + e.getMessage());\r\n//        }\r\n//    }\r\n\r\n    public void addBooking(String date_booking, String time_booking, String id_user, String id_payment, String description) {\r\n        String sql = \"insert into bookings(date_booking,id_user,id_payment,description,status_booking) values (?,?,?,?,?)\";\r\n        Connection connect = ConnectToDatabase.getConnect();\r\n        try {\r\n            PreparedStatement ppstm = connect.prepareStatement(sql);\r\n            ppstm.setString(1, date_booking + \" \" + time_booking);\r\n            ppstm.setString(2, id_user);\r\n            ppstm.setString(3, id_payment);\r\n            ppstm.setString(4, description);\r\n            ppstm.setInt(5, 0);\r\n//            ppstm.setString(6, null);\r\n            ppstm.executeUpdate();\r\n            System.out.println(\"success\");\r\n\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(\"Error when addBooking:\" + e.getMessage());\r\n        }\r\n    }\r\n\r\n    public String selectIdNew() {\r\n        String a = \"\";\r\n        try {\r\n            ResultSet rs = new ConnectToDatabase().selectData(\"select  id from customers order by id DESC LIMIT 1\");\r\n            while (rs.next()) {\r\n                System.out.println(\"success\");\r\n                a = rs.getString(1);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(\"Error when selectIdNew:\" + e.getMessage());\r\n        }\r\n        return a;\r\n    }\r\n\r\n    @Override\r\n    public boolean add(Object obj) {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean del(String id) {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean edit(String id, Object obj) {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public void read() {\r\n\r\n    }\r\n\r\n    static PreparedStatement statement = null;\r\n\r\n    public static void deleteConfirm(int id) {\r\n        String sql1 = \"delete from detail_bookings where id_booking = ?\";\r\n        String sql = \"delete from bookings where id = ? \";\r\n        Connection connection = new ConnectToDatabase().getConnect();\r\n        try {\r\n            statement = connection.prepareStatement(sql1);\r\n            statement.setInt(1, id);\r\n            statement.executeUpdate();\r\n\r\n            statement = connection.prepareStatement(sql);\r\n            statement.setInt(1, id);\r\n            statement.executeUpdate();\r\n\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\n    public static BookingModel getBooking(String id) {\r\n        String sql = \"SELECT b.id id,date_booking, id_user ,username, id_payment, t.name nameTypePayment,description, b.status_booking id_status_booking, s.name name_status_booking,tel,email,address \" +\r\n                \"FROM bookings b join type_payments t on t.id = b.id_payment \" +\r\n                \"join status_bookings s on s.id = b.status_booking \" +\r\n                \"WHERE b.id= ?\";\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setString(1, id);\r\n            ResultSet rs = ps.executeQuery();\r\n            BookingModel booking = null;\r\n            while (rs.next()) {\r\n                booking = new BookingModel();\r\n                booking.setId(rs.getString(\"id\"));\r\n                booking.setDate_booking(rs.getString(\"date_booking\"));\r\n                booking.setId_user(rs.getString(\"id_user\"));\r\n                booking.setUsername(rs.getString(\"username\"));\r\n                booking.setId_payment(rs.getString(\"id_payment\"));\r\n                booking.setNameTypePayment(rs.getString(\"nameTypePayment\"));\r\n\r\n                StatusBooking statusBooking = new StatusBooking();\r\n                statusBooking.setId(rs.getInt(\"id_status_booking\"));\r\n                statusBooking.setName(rs.getString(\"name_status_booking\"));\r\n\r\n                booking.setStatusBooking(statusBooking);\r\n                booking.setDescription(rs.getString(\"description\"));\r\n                booking.setTel(rs.getString(\"tel\"));\r\n                booking.setAddress(rs.getString(\"address\"));\r\n                booking.setEmail(rs.getString(\"email\"));\r\n\r\n            }\r\n            return booking;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n\r\n    public static void updateBooking(BookingModel bookingModel) {\r\n        String sql = \"update bookings set date_booking = ?, description = ?, status_booking=?, username=?,email=?,tel=?, address=?, id_transport=? where id = ?\";\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setTimestamp(1, Timestamp.valueOf(bookingModel.getDate_booking()));\r\n            ps.setString(2, bookingModel.getDescription());\r\n            ps.setInt(3, bookingModel.getStatusBooking().getId());\r\n            ps.setString(4, bookingModel.getUsername());\r\n            ps.setString(5, bookingModel.getEmail());\r\n            ps.setString(6, bookingModel.getTel());\r\n            ps.setString(7, bookingModel.getAddress());\r\n            ps.setString(8, bookingModel.getIdTransport());\r\n            ps.setString(9, bookingModel.getId());\r\n            ps.executeUpdate();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void updateBookingIDTransport(BookingModel bookingModel) {\r\n        String sql = \"update bookings set id_transport=? where id = ?\";\r\n        try {\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ps.setString(1, bookingModel.getIdTransport());\r\n            ps.setString(2, bookingModel.getId());\r\n            ps.executeUpdate();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static List<BookingModel> getListBooking() {\r\n        LinkedList<BookingModel> list = new LinkedList<>();\r\n\r\n        String sql = \"SELECT b.id id,date_booking, id_user ,username, id_payment, t.name nameTypePayment,description, b.status_booking id_status_booking, s.name name_status_booking,tel,email,id_transport \" +\r\n                \"FROM bookings b join type_payments t on t.id = b.id_payment \" +\r\n                \"join status_bookings s on s.id = b.status_booking \" +\r\n                \"order by id desc \";\r\n        try {\r\n\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n            ResultSet rs = ps.executeQuery();\r\n\r\n            while (rs.next()) {\r\n                BookingModel booking = new BookingModel();\r\n                booking.setId(rs.getString(\"id\"));\r\n                booking.setDate_booking(rs.getString(\"date_booking\"));\r\n                booking.setId_user(rs.getString(\"id_user\"));\r\n                booking.setUsername(rs.getString(\"username\"));\r\n                booking.setId_payment(rs.getString(\"id_payment\"));\r\n                booking.setNameTypePayment(rs.getString(\"nameTypePayment\"));\r\n                StatusBooking statusBooking = new StatusBooking();\r\n                statusBooking.setId(rs.getInt(\"id_status_booking\"));\r\n                statusBooking.setName(rs.getString(\"name_status_booking\"));\r\n                booking.setStatusBooking(statusBooking);\r\n                booking.setDescription(rs.getString(\"description\"));\r\n                booking.setTel(rs.getString(\"tel\"));\r\n                booking.setIdTransport(rs.getString(\"id_transport\"));\r\n\r\n                list.add(booking);\r\n            }\r\n            return list;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static List<BookingModel> getListBookedByIDUser(int idUser) {\r\n        LinkedList<BookingModel> list = new LinkedList<>();\r\n\r\n\r\n        String sql = \"SELECT d.id id, id_booking, id_product, p.name name_product, price, d.quantity quantity,b.date_booking ,b.status_booking id_status_booking, s.name name_status_booking \" +\r\n                \"FROM bookings b join detail_bookings d on d.id_booking = b.id \" +\r\n                \"join products p on p.id = d.id_product \" +\r\n                \"join status_bookings s on s.id = b.status_booking \" +\r\n                \"WHERE b.id_user=? \" +\r\n                \"order by id desc \";\r\n        try {\r\n\r\n            PreparedStatement ps = DBConnect.getInstall().preStatement(sql);\r\n\r\n            ps.setInt(1, idUser);\r\n\r\n            ResultSet rs = ps.executeQuery();\r\n\r\n            while (rs.next()) {\r\n\r\n                BookingModel booking = new BookingModel();\r\n                booking.setId(rs.getString(\"id\"));\r\n                booking.setDate_booking(rs.getString(\"id_booking\"));\r\n                booking.setId_product(rs.getInt(\"id_product\"));\r\n                booking.setName(rs.getString(\"name_product\"));\r\n                booking.setPrice(rs.getInt(\"price\"));\r\n                booking.setQuantity(rs.getInt(\"quantity\"));\r\n//                booking.setAvatar(rs.getString(\"avatar\"));\r\n                booking.setDate_booking(rs.getString(\"date_booking\"));\r\n\r\n                StatusBooking statusBooking = new StatusBooking();\r\n                statusBooking.setId(rs.getInt(\"id_status_booking\"));\r\n                statusBooking.setName(rs.getString(\"name_status_booking\"));\r\n\r\n                booking.setStatusBooking(statusBooking);\r\n\r\n                list.add(booking);\r\n            }\r\n            return list;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        BookingModel bookingModel = new BookingModel();\r\n        bookingModel.setId(\"1013\");\r\n        bookingModel.setIdTransport(\"558e6a5e95ba4aaaba10b84385d67d00\");\r\n        BookingDAO.updateBookingIDTransport(bookingModel);\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/dao/BookingDAO.java b/src/main/java/vn/edu/hcmuaf/fit/dao/BookingDAO.java
--- a/src/main/java/vn/edu/hcmuaf/fit/dao/BookingDAO.java	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/java/vn/edu/hcmuaf/fit/dao/BookingDAO.java	(date 1687368568297)
@@ -340,9 +340,15 @@
         LinkedList<BookingModel> list = new LinkedList<>();
 
 
-        String sql = "SELECT d.id id, id_booking, id_product, p.name name_product, price, d.quantity quantity,b.date_booking ,b.status_booking id_status_booking, s.name name_status_booking " +
-                "FROM bookings b join detail_bookings d on d.id_booking = b.id " +
-                "join products p on p.id = d.id_product " +
+//        String sql = "SELECT d.id id, id_booking, id_product, p.name name_product, price, d.quantity quantity,b.date_booking ,b.status_booking id_status_booking, s.name name_status_booking " +
+//                "FROM bookings b join detail_bookings d on d.id_booking = b.id " +
+//                "join products p on p.id = d.id_product " +
+//                "join status_bookings s on s.id = b.status_booking " +
+//                "WHERE b.id_user=? " +
+//                "order by id desc ";
+
+        String sql = "SELECT b.id id, date_booking ,status_booking , name " +
+                "FROM bookings b " +
                 "join status_bookings s on s.id = b.status_booking " +
                 "WHERE b.id_user=? " +
                 "order by id desc ";
@@ -357,19 +363,12 @@
             while (rs.next()) {
 
                 BookingModel booking = new BookingModel();
-                booking.setId(rs.getString("id"));
-                booking.setDate_booking(rs.getString("id_booking"));
-                booking.setId_product(rs.getInt("id_product"));
-                booking.setName(rs.getString("name_product"));
-                booking.setPrice(rs.getInt("price"));
-                booking.setQuantity(rs.getInt("quantity"));
-//                booking.setAvatar(rs.getString("avatar"));
                 booking.setDate_booking(rs.getString("date_booking"));
+                booking.setId(rs.getString("id"));
 
                 StatusBooking statusBooking = new StatusBooking();
-                statusBooking.setId(rs.getInt("id_status_booking"));
-                statusBooking.setName(rs.getString("name_status_booking"));
-
+                statusBooking.setId(rs.getInt("status_booking"));
+                statusBooking.setName(rs.getString("name"));
                 booking.setStatusBooking(statusBooking);
 
                 list.add(booking);
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
new file mode 100644
--- /dev/null	(date 1687315695803)
+++ b/.idea/misc.xml	(date 1687315695803)
@@ -0,0 +1,15 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ExternalStorageConfigurationManager" enabled="true" />
+  <component name="FrameworkDetectionExcludesConfiguration">
+    <file type="web" url="file://$PROJECT_DIR$" />
+  </component>
+  <component name="MavenProjectsManager">
+    <option name="originalFiles">
+      <list>
+        <option value="$PROJECT_DIR$/pom.xml" />
+      </list>
+    </option>
+  </component>
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_19" default="true" project-jdk-name="19" project-jdk-type="JavaSDK" />
+</project>
\ No newline at end of file
Index: src/main/java/vn/edu/hcmuaf/fit/controller/web/CheckoutController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.controller.web;\r\n\r\nimport vn.edu.hcmuaf.fit.model.*;\r\nimport vn.edu.hcmuaf.fit.service.CheckoutService;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@WebServlet(name = \"CheckoutController\", value = \"/checkout\")\r\npublic class CheckoutController extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        HashMap<Integer, ProductCartModel> cart = (HashMap<Integer, ProductCartModel>) session.getAttribute(\"cart\");\r\n        request.setAttribute(\"cart\", cart);\r\n        request.getRequestDispatcher(\"view/web/checkout.jsp\").forward(request, response);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int serviceFee = Integer.parseInt(request.getParameter(\"service-fee\"));\r\n        System.out.println(\"serviceFee:\"+serviceFee);\r\n\r\n        HttpSession session = request.getSession();\r\n        HashMap<Integer, ProductCartModel> cart = (HashMap<Integer, ProductCartModel>) session.getAttribute(\"cart\");\r\n        int sumMoney = 0;\r\n        for (Map.Entry<Integer, ProductCartModel> item : cart.entrySet()) {\r\n            sumMoney += item.getValue().getSumMoney();\r\n        }\r\n\r\n        System.out.println(sumMoney);\r\n\r\n        String name = request.getParameter(\"name\");\r\n        String email = request.getParameter(\"email\");\r\n        String tel = request.getParameter(\"tel\");\r\n        String address = request.getParameter(\"address\");\r\n        String time = request.getParameter(\"time\");\r\n        String date = request.getParameter(\"date\");\r\n        String description = request.getParameter(\"description\");\r\n        String payment = request.getParameter(\"payment\");\r\n        String store = request.getParameter(\"store\");\r\n        int toDistrictID = Integer.parseInt(request.getParameter(\"id-district\"));\r\n        int toWardId = Integer.parseInt(request.getParameter(\"id-ward\"));\r\n\r\n\r\n        UserModel user = (UserModel) session.getAttribute(\"userlogin\");\r\n        CheckoutService checkoutService = new CheckoutService();\r\n        BookingModel booking = new BookingModel();\r\n        if (user != null) {\r\n            booking.setId_user(\"1\");\r\n        }\r\n\r\n        StatusBooking statusBooking = new StatusBooking();\r\n        statusBooking.setId(1);\r\n\r\n        booking.setStatusBooking(statusBooking);\r\n        booking.setUsername(name);\r\n        booking.setEmail(email);\r\n        booking.setTel(tel);\r\n        booking.setAddress(address);\r\n        booking.setDate_booking(date + \" \" + time + \":00\");\r\n        booking.setDescription(description);\r\n        booking.setId_payment(payment);\r\n        booking.setToDistrictId(toDistrictID);\r\n        booking.setToWardId(toWardId);\r\n        booking.setHeight(100);\r\n        booking.setLength(100);\r\n        booking.setWidth(100);\r\n        booking.setWeight(100);\r\n        booking.setSumMoney(serviceFee + sumMoney);\r\n\r\n        int idInserted = checkoutService.insertBookingCart(booking);\r\n        if (idInserted > 0) {\r\n            session.setAttribute(\"mess\", \"success\");\r\n        }\r\n\r\n        boolean checkAddBooking = false;\r\n        for (Map.Entry<Integer, ProductCartModel> productCart : cart.entrySet()) {\r\n            DetailBookingModel checkoutDetail = new DetailBookingModel(productCart.getKey(), productCart.getValue().getProductModel().getId(), productCart.getValue().getQuantity());\r\n            checkAddBooking = CheckoutService.addDetailBooking(idInserted, checkoutDetail);\r\n        }\r\n\r\n        if (cart != null && checkAddBooking)\r\n            session.removeAttribute(\"cart\");\r\n        response.sendRedirect(\"cart\");\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/controller/web/CheckoutController.java b/src/main/java/vn/edu/hcmuaf/fit/controller/web/CheckoutController.java
--- a/src/main/java/vn/edu/hcmuaf/fit/controller/web/CheckoutController.java	(revision 28dedd27ec4b5fb25567d0c0b2a800b08d8acf84)
+++ b/src/main/java/vn/edu/hcmuaf/fit/controller/web/CheckoutController.java	(date 1687385612074)
@@ -25,8 +25,7 @@
 
     @Override
     protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
-        int serviceFee = Integer.parseInt(request.getParameter("service-fee"));
-        System.out.println("serviceFee:"+serviceFee);
+        String serviceFee = request.getParameter("service-fee");
 
         HttpSession session = request.getSession();
         HashMap<Integer, ProductCartModel> cart = (HashMap<Integer, ProductCartModel>) session.getAttribute("cart");
@@ -34,7 +33,6 @@
         for (Map.Entry<Integer, ProductCartModel> item : cart.entrySet()) {
             sumMoney += item.getValue().getSumMoney();
         }
-
         System.out.println(sumMoney);
 
         String name = request.getParameter("name");
@@ -74,7 +72,12 @@
         booking.setLength(100);
         booking.setWidth(100);
         booking.setWeight(100);
-        booking.setSumMoney(serviceFee + sumMoney);
+//        if (serviceFee != null) {
+//            System.out.println("serviceFee"+serviceFee);
+//            booking.setSumMoney(sumMoney + Integer.parseInt(serviceFee));
+//        } else {
+//            booking.setSumMoney(sumMoney);
+//        }
 
         int idInserted = checkoutService.insertBookingCart(booking);
         if (idInserted > 0) {
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
new file mode 100644
--- /dev/null	(date 1687315651291)
+++ b/.idea/vcs.xml	(date 1687315651291)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="" vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
Index: src/main/webapp/view/web/rate_comment.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/view/web/rate_comment.jsp b/src/main/webapp/view/web/rate_comment.jsp
new file mode 100644
--- /dev/null	(date 1687394751432)
+++ b/src/main/webapp/view/web/rate_comment.jsp	(date 1687394751432)
@@ -0,0 +1,109 @@
+<%@ page import="vn.edu.hcmuaf.fit.model.ProductModel" %>
+<%@ page contentType="text/html;charset=UTF-8" language="java" %>
+<%@include file="../../common/taglib.jsp" %>
+
+<!DOCTYPE html>
+<html lang="en">
+
+<head>
+    <%@include file="../../common/web/head.jsp" %>
+    <title>Đánh giá và nhận xét | Phone Care</title>
+
+</head>
+
+<body>
+<%    ProductModel product = (ProductModel) request.getAttribute("product");%>
+<%@include file="../../common/web/header.jsp" %>
+
+<%--                    RATE & REVIEW           --%>
+<div class="rate-and-review">
+    <form action="rate-comment?id-product=<%=product.getId()%>" class="wrapper" method="post">
+        <div class="master">
+            <h2>Bạn cảm thấy sản phẩm này như thế nào?</h2>
+            <div class="rating-component">
+                <div class="status-msg">
+                    <label>
+                        <input class="rating_msg" type="hidden" name="rating_msg" value=""/>
+                    </label>
+                </div>
+                <div class="stars-box">
+                    <i class="star fa fa-star" title="1 star" data-message="Rất tệ"
+                       data-value="1"></i>
+                    <i class="star fa fa-star" title="2 stars" data-message="Tệ"
+                       data-value="2"></i>
+                    <i class="star fa fa-star" title="3 stars" data-message="Trung bình"
+                       data-value="3"></i>
+                    <i class="star fa fa-star" title="4 stars" data-message="Tốt"
+                       data-value="4"></i>
+                    <i class="star fa fa-star" title="5 stars" data-message="Rất tốt"
+                       data-value="5"></i>
+                </div>
+                <div class="starrate">
+                    <label>
+                        <input class="ratevalue" type="hidden" name="rate_value" value=""/>
+                    </label>
+                </div>
+            </div>
+
+            <div class="feedback-tags">
+                <div class="tags-container" data-tag-set="1">
+                    <div class="question-tag">
+                        Tại sao bạn lại có trải nghiệm tệ?
+                    </div>
+                </div>
+                <div class="tags-container" data-tag-set="2">
+                    <div class="question-tag">
+                        Tại sao bạn lại có trải nghiệm tệ?
+                    </div>
+
+                </div>
+
+                <div class="tags-container" data-tag-set="3">
+                    <div class="question-tag">
+                        Tại sao bạn lại có trải nghiệm ở mức trung bình?
+                    </div>
+                </div>
+                <div class="tags-container" data-tag-set="4">
+                    <div class="question-tag">
+                        Tại sao bạn lại đánh giá sản phẩm tốt?
+                    </div>
+                </div>
+
+                <div class="tags-container" data-tag-set="5">
+                    <div class="make-compliment">
+                        <div class="compliment-container">
+                            Để lại bình luận chi tiết
+                            <i class="far fa-smile-wink"></i>
+                        </div>
+                    </div>
+                </div>
+
+                <div class="tags-box">
+                    <input type="text" class="tag form-control" name="comment"
+                           id="inlineFormInputName" placeholder="Nhập bình luận của bạn...">
+                    <input type="hidden" name="product_id" value="<%=product.getId()%>"/>
+                </div>
+
+            </div>
+
+            <div class="button-box">
+                <input type="submit" class="done btn btn-warning" disabled="disabled"
+                       value="Bình luận"/>
+            </div>
+
+            <div class="submited-box">
+                <div class="loader"></div>
+                <div class="success-message">
+                    Cảm ơn bạn!
+                </div>
+            </div>
+        </div>
+    </form>
+</div>
+
+<%@include file="../../common/web/footer.jsp" %>
+<script src="js/rate&review.js"></script>
+
+</body>
+
+</html>
\ No newline at end of file
Index: src/main/java/vn/edu/hcmuaf/fit/controller/web/RateComment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/controller/web/RateComment.java b/src/main/java/vn/edu/hcmuaf/fit/controller/web/RateComment.java
new file mode 100644
--- /dev/null	(date 1687394231694)
+++ b/src/main/java/vn/edu/hcmuaf/fit/controller/web/RateComment.java	(date 1687394231694)
@@ -0,0 +1,39 @@
+package vn.edu.hcmuaf.fit.controller.web;
+
+import vn.edu.hcmuaf.fit.model.ProductModel;
+import vn.edu.hcmuaf.fit.model.UserModel;
+import vn.edu.hcmuaf.fit.service.ProductService;
+
+import javax.servlet.*;
+import javax.servlet.http.*;
+import javax.servlet.annotation.*;
+import java.io.IOException;
+
+@WebServlet(name = "RateComment", value = "/rate-comment")
+public class RateComment extends HttpServlet {
+    @Override
+    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
+        int idProduct = Integer.parseInt(request.getParameter("id-product"));
+        ProductService productService = new ProductService();
+        ProductModel product = productService.getDetailProduct(idProduct);
+        request.setAttribute("product", product);
+        request.getRequestDispatcher("/view/web/rate_comment.jsp").forward(request, response);
+    }
+
+    @Override
+    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
+        int idProduct = Integer.parseInt(request.getParameter("id-product"));
+        int rate = Integer.parseInt(request.getParameter("rate_value"));
+        String content = request.getParameter("comment");
+        HttpSession session = request.getSession();
+        UserModel userModel = (UserModel) session.getAttribute("userlogin");
+        int idUser = Integer.parseInt(userModel.getId());
+
+        boolean isInsertRateReview = ProductService.insertRateReview(idProduct, rate, idUser, content);
+        session.setAttribute("isInsertRateReview", isInsertRateReview);
+        ProductService productService = new ProductService();
+        ProductModel product = productService.getDetailProduct(idProduct);
+        request.setAttribute("product", product);
+        request.getRequestDispatcher("/view/web/booked.jsp").forward(request, response);
+    }
+}
